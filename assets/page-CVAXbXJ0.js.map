{"version":3,"file":"page-CVAXbXJ0.js","sources":["../../src/pages/popup/multi-select/page.tsx"],"sourcesContent":["\n\nimport { useEffect, useState, Suspense } from \"react\";\nimport { useSearchParams } from \"@/lib/hooks/useAppLocation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { postPopupMessage } from \"@/lib/popup-bus\";\nimport { LoadingSpinner } from \"@/components/app/LoadingSpinner\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\nfunction MultiSelectPopupContent() {\n  const searchParams = useSearchParams();\n  const openerTabId = searchParams.get(\"openerTabId\");\n  const source = searchParams.get(\"source\");\n  const optionsParam = searchParams.get(\"options\");\n  const selectedParam = searchParams.get(\"selected\");\n  const title = searchParams.get(\"title\") || \"선택\";\n\n  const [options, setOptions] = useState<{ value: string; label: string }[]>([]);\n  const [selectedValues, setSelectedValues] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (optionsParam) {\n      try {\n        const parsedOptions = JSON.parse(decodeURIComponent(optionsParam));\n        setOptions(parsedOptions);\n      } catch (e) {\n        console.error(\"Failed to parse options\", e);\n      }\n    }\n    if (selectedParam) {\n        try {\n            const parsedSelected = JSON.parse(decodeURIComponent(selectedParam));\n            if (Array.isArray(parsedSelected)) {\n                setSelectedValues(parsedSelected);\n            }\n        } catch (e) {\n            console.error(\"Failed to parse selected values\", e);\n        }\n    }\n  }, [optionsParam, selectedParam]);\n\n  const handleToggle = (value: string, checked: boolean) => {\n    if (checked) {\n      setSelectedValues((prev) => [...prev, value]);\n    } else {\n      setSelectedValues((prev) => prev.filter((v) => v !== value));\n    }\n  };\n\n  const handleConfirm = () => {\n    if (openerTabId && source) {\n      postPopupMessage({\n        targetTabId: openerTabId,\n        source: source,\n        payload: selectedValues,\n      });\n      window.close();\n    }\n  };\n\n  const handleCancel = () => {\n    window.close();\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-white p-6\">\n      <h1 className=\"text-xl font-bold mb-4\">{title}</h1>\n      \n      <div className=\"flex-1 overflow-y-auto border rounded-md mb-4\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead className=\"w-[50px] text-center\">선택</TableHead>\n              <TableHead className=\"text-center\">상태</TableHead>\n              <TableHead className=\"text-center\">비고</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {options.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={3} className=\"text-center h-24 text-muted-foreground\">\n                  항목이 없습니다.\n                </TableCell>\n              </TableRow>\n            ) : (\n              options.map((option) => (\n                <TableRow \n                  key={option.value}\n                  className=\"cursor-pointer hover:bg-muted/50\"\n                  onClick={() => {\n                    // 행 클릭 시 체크박스 토글\n                    const isChecked = selectedValues.includes(option.value);\n                    handleToggle(option.value, !isChecked);\n                  }}\n                >\n                  <TableCell className=\"text-center p-2\" onClick={(e) => e.stopPropagation()}>\n                    <div className=\"flex justify-center\">\n                        <Checkbox\n                        id={`opt-${option.value}`}\n                        checked={selectedValues.includes(option.value)}\n                        onCheckedChange={(checked) => handleToggle(option.value, checked as boolean)}\n                        />\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-center p-2\">\n                    <label\n                        htmlFor={`opt-${option.value}`}\n                        className=\"cursor-pointer w-full h-full block\"\n                        onClick={(e) => {\n                             e.stopPropagation(); // Checkbox toggle handled by row click or checkbox change\n                             const isChecked = selectedValues.includes(option.value);\n                             handleToggle(option.value, !isChecked);\n                        }}\n                    >\n                        {option.label}\n                    </label>\n                  </TableCell>\n                  <TableCell className=\"text-center p-2 text-muted-foreground\">\n                    {/* 비고란은 현재 데이터가 없으므로 공란 */}\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      <div className=\"flex justify-end gap-2\">\n        <Button variant=\"outline\" onClick={handleCancel}>취소</Button>\n        <Button onClick={handleConfirm}>확인</Button>\n      </div>\n    </div>\n  );\n}\n\nexport default function MultiSelectPopupPage() {\n    return (\n        <Suspense fallback={<LoadingSpinner />}>\n            <MultiSelectPopupContent />\n        </Suspense>\n    );\n}"],"names":["MultiSelectPopupContent","searchParams","useSearchParams","openerTabId","source","optionsParam","selectedParam","title","options","setOptions","useState","selectedValues","setSelectedValues","useEffect","parsedOptions","e","parsedSelected","handleToggle","value","checked","prev","v","handleConfirm","postPopupMessage","handleCancel","jsxs","jsx","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","option","isChecked","Checkbox","Button","MultiSelectPopupPage","Suspense","LoadingSpinner"],"mappings":"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"}