import{U as C,r as o,j as t}from"./index-rFDfNqWc.js";import{C as w,a as j,b as u}from"./CustomTabs-DoOFos06.js";import{F as S}from"./FilterContainer-DiDM2qk2.js";import{D as $}from"./DataTable-Dvqiat0m.js";import{P as v}from"./PopupRightActions-1BaX79Mn.js";import{l as P}from"./popup-bus-D6rWwgNZ.js";import"./index-BVYKgh-g.js";import"./Combination-48IUafib.js";import"./select-zoLzkzr2.js";import"./index-C-hN5_st.js";import"./checkbox-NKdEwGcU.js";import"./format-Bs4upCOt.js";import"./textarea-BhWVCVZg.js";import"./table-Crt9sqOn.js";const T=Array.from({length:50},(n,r)=>({id:r+1,registrationDate:`2023-11-${String(r+1).padStart(2,"0")}`,documentName:`[여신] 대출신청서_${r+1}.pdf`,customerNumber:`CUST100${r}`,realNameNumber:"900101-1******",customerName:`김고객${r}`,accountNumber:`ACC-00${r}`,applicationNumber:`APP-00${r}`,branch:"강남지점",employeeId:`EMP${10+r}`,employeeName:`박직원${r}`,uploader:"시스템",processedDateTime:`2023-11-${String(r+1).padStart(2,"0")} 14:30`})),D=[{accessorKey:"registrationDate",header:"등록일자"},{accessorKey:"documentName",header:"문서명"},{accessorKey:"customerNumber",header:"고객번호"},{accessorKey:"realNameNumber",header:"실명번호"},{accessorKey:"customerName",header:"고객명"},{accessorKey:"accountNumber",header:"계좌번호"},{accessorKey:"applicationNumber",header:"신청번호"},{accessorKey:"branch",header:"지점 및 부서"},{accessorKey:"employeeId",header:"사원번호"},{accessorKey:"employeeName",header:"사원명"},{accessorKey:"uploader",header:"업로더"},{accessorKey:"processedDateTime",header:"처리일자 및 시간"}];function V(){const n=C(),r=n.get("openerTabId"),[l,p]=o.useState({}),[b,d]=o.useState([]),[i,h]=o.useState("loan"),m=o.useCallback((e,c)=>{p(a=>({...a,[e]:c}))},[]);o.useEffect(()=>{const e={},c=new URLSearchParams(window.location.search),a=n.get("customerNumber")||c.get("customerNumber"),s=n.get("accountNumber")||c.get("accountNumber");console.log("[DocumentSearchPopup] window.location.search:",window.location.search),console.log("[DocumentSearchPopup] Resolved - customerNumber:",a,"accountNumber:",s),a&&(e.customerNumber=a),s&&(e.accountNumber=s),console.log("[DocumentSearchPopup] Setting initial filters:",e),Object.keys(e).length>0&&p(f=>({...f,...e}))},[n]),o.useEffect(()=>P(a=>{if(a.source==="customer-search"){const s=a.payload;m("customerNumber",s.centralCustomerNumber),m("accountNumber",s.accountNumber)}else if(a.source==="branch-management"){const s=a.payload;m("branchCode",{code:s.branchCode,name:s.branchName})}}),[m]);const N=o.useCallback(()=>{console.log(`Searching in tab '${i}' with filters:`,l);const e=T.map(c=>({...c,documentName:`[${i}] 문서_${c.id}.pdf`}));d(e)},[l,i]),g=o.useCallback(()=>{p({}),d([])},[]),x=[{id:"search",text:"조회",onClick:N},{id:"reset",text:"초기화",onClick:g}],y=[{type:"grid",columns:3,filters:[{name:"customerNumber",type:"long-search",label:"고객번호",onButtonClick:e=>{const c=e||"",a=l.accountNumber||"";window.open(`/popup/customer-search?customerNumber=${c}&accountNumber=${a}&openerTabId=${r}`,"CustomerSearch","width=1600,height=800")}},{name:"residentBusinessNumber",type:"text",label:"주민사업자번호"},{name:"accountNumber",type:"text",label:"계좌번호"},{name:"applicationNumber",type:"text",label:"신청번호"},{name:"branchCode",type:"search",label:"부점코드",onButtonClick:e=>{const c=(e==null?void 0:e.code)||"",a=(e==null?void 0:e.name)||"";window.open(`/popup/branch-management?branchCode=${c}&branchName=${a}&openerTabId=${r}`,"BranchManagement","width=1600,height=800")}},{name:"registrant",type:"search",label:"등록사용자"},{name:"document",type:"search",label:"문서"},{name:"uploader",type:"search",label:"업로더"},{name:"processingDate",type:"date-range",label:"처리일자"},{name:"documentListType",type:"select",label:"문서목록 구분",options:[{value:"pre-inquiry",label:"사전조회(상담)"},{value:"application",label:"신청"},{value:"review",label:"심사"},{value:"all",label:"전체"}]}]}];return t.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-gray-50 min-h-screen",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-xl font-bold",children:"문서검색"}),t.jsx(v,{actions:x})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx(w,{value:i,onValueChange:h,children:t.jsxs(j,{className:"bg-transparent p-0",children:[t.jsx(u,{value:"loan",className:"h-9 px-4 data-[state=active]:bg-emerald-100 data-[state=active]:text-emerald-800",children:"여신"}),t.jsx(u,{value:"deposit",className:"h-9 px-4 data-[state=active]:bg-emerald-100 data-[state=active]:text-emerald-800",children:"수신"}),t.jsx(u,{value:"slip",className:"h-9 px-4 data-[state=active]:bg-emerald-100 data-[state=active]:text-emerald-800",children:"전표"}),t.jsx(u,{value:"check",className:"h-9 px-4 data-[state=active]:bg-emerald-100 data-[state=active]:text-emerald-800",children:"수표"})]})}),t.jsx(S,{filterLayout:y,values:l,onChange:m})]}),t.jsx("div",{className:"flex-grow min-h-0",children:t.jsx($,{title:"조회내용",columns:D,data:b})})]})}export{V as default};
//# sourceMappingURL=page-BcZgk9xP.js.map
