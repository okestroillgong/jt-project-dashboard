{"version":3,"file":"page-CP1W2HI6.js","sources":["../../src/pages/dashboard/after-loan/credit-rating-excel-upload/page.tsx"],"sourcesContent":["\n\nimport { usePathname } from \"@/lib/hooks/useAppLocation\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport React from 'react';\nimport { usePageStore } from \"@/lib/store/pageStore\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbList,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n} from \"@/components/ui/breadcrumb\";\nimport { LeftActions, ActionType as LeftActionType } from \"@/components/app/LeftActions\";\nimport { RightActions, ActionType as RightActionType } from \"@/components/app/RightActions\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport TitleIcon from \"@/assets/icons/webp/title-icon.webp\";\nimport { ColumnDef } from \"@tanstack/react-table\";\n\n// 1. Data Type Definitions\n\n// 1.1 Integrated Excel Upload Table Data Type\ntype UploadData = {\n  curRow: number;\n  fdnCustNo: string;\n  custNm: string;\n  bondMgGrd: string;\n};\n\n// 1.2 Error List Table Data Type\ntype ErrorData = {\n  curRow: number;\n  prcsStts: string;\n  fdnCustNo: string;\n  custNm: string;\n  bondMgGrd: string;\n};\n\n// 2. Mock Data (Ideally empty initially, populated after upload)\nconst mockUploadData: UploadData[] = Array.from({ length: 5 }, (_, i) => ({\n  curRow: i + 1,\n  fdnCustNo: `INITIAL_CUST${100 + i}`,\n  custNm: `초기고객${i + 1}`,\n  bondMgGrd: `INITIAL_GRADE_${String.fromCharCode(65 + i)}`,\n}));\nconst mockErrorData: ErrorData[] = [];\n\n// 3. Column Definitions\n\n// 3.1 Integrated Excel Upload Columns\nconst uploadColumns: ColumnDef<UploadData>[] = [\n  { accessorKey: \"curRow\", header: \"순번\" },\n  { accessorKey: \"fdnCustNo\", header: \"고객번호\" },\n  { accessorKey: \"custNm\", header: \"고객명\" },\n  { accessorKey: \"bondMgGrd\", header: \"코드\" },\n];\n\n// 3.2 Error List Columns\nconst errorColumns: ColumnDef<ErrorData>[] = [\n  { accessorKey: \"curRow\", header: \"순번\" },\n  { accessorKey: \"prcsStts\", header: \"처리상태\" },\n  { accessorKey: \"fdnCustNo\", header: \"고객번호\" },\n  { accessorKey: \"custNm\", header: \"고객명\" },\n  { accessorKey: \"bondMgGrd\", header: \"코드\" },\n];\n\nexport default function CreditRatingExcelUploadPage() {\n  const tabId = usePathname();\n  const { currentState, updateTableData } = usePageStore();\n\n  // Initialize uploadTable with mockUploadData on component mount\n  React.useEffect(() => {\n    updateTableData(tabId, \"uploadTable\", mockUploadData);\n    updateTableData(tabId, \"errorTable\", []); // Ensure error table is empty initially\n  }, [tabId, updateTableData]);\n\n  const handleFileUpload = () => {\n    console.log(\"File Upload Clicked\");\n    // Simulate file upload and processing\n    // In a real scenario, this would parse the file and update both tables based on validation results.\n    \n    const simulatedErrorData: ErrorData[] = Array.from({ length: 2 }, (_, i) => ({\n      curRow: i + 1,\n      prcsStts: \"오류\",\n      fdnCustNo: `ERROR_CUST${300 + i}`,\n      custNm: `오류고객${i + 1}`,\n      bondMgGrd: \"INVALID\",\n    }));\n\n    updateTableData(tabId, \"errorTable\", simulatedErrorData);\n  };\n\n  const handleSave = () => {\n    console.log(\"Save Clicked\");\n  };\n\n  const leftActions: { id: LeftActionType; onClick?: () => void }[] = [\n    { id: \"category\" as LeftActionType }, // The dropdown logic is handled in LeftActions component based on 'category' ID\n  ];\n\n  const rightActions: { id: RightActionType; onClick?: () => void }[] = [\n    { id: \"file-upload\", onClick: handleFileUpload },\n    { id: \"save\", onClick: handleSave },\n  ];\n\n  if (!currentState) return null;\n\n  const uploadRowCount = currentState.tables?.['uploadTable']?.length || 0;\n  const errorRowCount = currentState.tables?.['errorTable']?.length || 0;\n\n  return (\n    <div className=\"flex flex-col gap-6 pb-10\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <img src={TitleIcon} alt=\"타이틀 아이콘\" width={40} height={40} />\n          <h2 className=\"text-lg font-semibold\">채권관리등급 엑셀 업로드</h2>\n        </div>\n        <Breadcrumb>\n          <BreadcrumbList>\n            <BreadcrumbItem>홈</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>여신사후</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>\n              <BreadcrumbPage>채권관리등급 엑셀 업로드</BreadcrumbPage>\n            </BreadcrumbItem>\n          </BreadcrumbList>\n        </Breadcrumb>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex items-center justify-between min-h-[35px]\">\n        <LeftActions actions={leftActions} />\n        <RightActions actions={rightActions} />\n      </div>\n\n      {/* Integrated Excel Upload Table */}\n      <DataTable\n          title=\"통합 엑셀 업로드\"\n          columns={uploadColumns}\n          data={currentState.tables?.['uploadTable'] || []}\n      />\n\n      {/* Error List Table */}\n      {errorRowCount > 0 && (\n        <DataTable\n            title=\"오류 리스트\"\n            columns={errorColumns}\n            data={currentState.tables?.['errorTable'] || []}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["mockUploadData","_","i","uploadColumns","errorColumns","CreditRatingExcelUploadPage","tabId","usePathname","currentState","updateTableData","usePageStore","React","handleFileUpload","simulatedErrorData","handleSave","leftActions","rightActions","_b","_a","errorRowCount","_d","_c","jsxs","jsx","TitleIcon","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbSeparator","BreadcrumbPage","LeftActions","RightActions","DataTable","_e","_f"],"mappings":"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"}