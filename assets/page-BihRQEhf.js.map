{"version":3,"file":"page-BihRQEhf.js","sources":["../../src/pages/dashboard/after-loan/legal-action/legal-info-sync/page.tsx"],"sourcesContent":["\n\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { usePathname } from \"@/lib/hooks/useAppLocation\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbList,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n} from \"@/components/ui/breadcrumb\";\nimport TitleIcon from \"@/assets/icons/webp/title-icon.webp\";\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport { FilterContainer } from \"@/components/filters/FilterContainer\";\nimport { RightActions } from \"@/components/app/RightActions\";\nimport { LeftActions } from \"@/components/app/LeftActions\";\nimport type { FilterLayout } from \"@/components/filters/types\";\nimport { usePageStore } from \"@/lib/store/pageStore\";\nimport { listenForPopupMessages, postPopupMessage } from \"@/lib/popup-bus\"; // Assuming popup-bus is used for consistency\n\n// --- Types for Data and Filters ---\n\n// Data type for the legal information table\ninterface LegalInfoData {\n  id: number; // 순번\n  accountNumber: string; // 계좌번호\n  applicantName: string; // 신청인명\n  caseNumber: string; // 사건번호\n  status: string; // 상태\n  courtName: string; // 법원명\n  receiptDate: string; // 접수일자\n  startDate: string; // 개시일자\n  approvalDate: string; // 인가일자\n  withdrawalDate: string; // 취하일자\n  customerNumber: string; // 고객번호 (for popup)\n  residentNumber: string; // 주민번호 (for popup)\n  legalManagementNumber: string; // 법무관리번호 (for popup)\n  legalManagementClassificationCode: string; // 법무관리구분코드 (for popup)\n}\n\n// --- Mock Data (for demonstration) ---\nconst mockData: LegalInfoData[] = [\n  {\n    id: 1,\n    accountNumber: \"1234567890\",\n    applicantName: \"김법무\",\n    caseNumber: \"2023가단12345\",\n    status: \"접수\",\n    courtName: \"서울중앙지방법원\",\n    receiptDate: \"2023-01-15\",\n    startDate: \"2023-02-01\",\n    approvalDate: \"2023-03-01\",\n    withdrawalDate: \"\",\n    customerNumber: \"CUST001\",\n    residentNumber: \"800101-1234567\",\n    legalManagementNumber: \"LGL001\",\n    legalManagementClassificationCode: \"A\",\n  },\n  {\n    id: 2,\n    accountNumber: \"0987654321\",\n    applicantName: \"이법무\",\n    caseNumber: \"2023나23456\",\n    status: \"진행중\",\n    courtName: \"수원지방법원\",\n    receiptDate: \"2023-02-20\",\n    startDate: \"2023-03-10\",\n    approvalDate: \"\",\n    withdrawalDate: \"\",\n    customerNumber: \"CUST002\",\n    residentNumber: \"900202-2345678\",\n    legalManagementNumber: \"LGL002\",\n    legalManagementClassificationCode: \"B\",\n  },\n  {\n    id: 3,\n    accountNumber: \"1122334455\",\n    applicantName: \"박법무\",\n    caseNumber: \"2023다34567\",\n    status: \"인가\",\n    courtName: \"부산지방법원\",\n    receiptDate: \"2023-03-01\",\n    startDate: \"2023-04-01\",\n    approvalDate: \"2023-05-01\",\n    withdrawalDate: \"\",\n    customerNumber: \"CUST003\",\n    residentNumber: \"850303-1345678\",\n    legalManagementNumber: \"LGL003\",\n    legalManagementClassificationCode: \"A\",\n  },\n  {\n    id: 4,\n    accountNumber: \"5566778899\",\n    applicantName: \"최법무\",\n    caseNumber: \"2023라45678\",\n    status: \"취하\",\n    courtName: \"대구지방법원\",\n    receiptDate: \"2023-04-05\",\n    startDate: \"2023-05-01\",\n    approvalDate: \"\",\n    withdrawalDate: \"2023-06-01\",\n    customerNumber: \"CUST004\",\n    residentNumber: \"750404-1456789\",\n    legalManagementNumber: \"LGL004\",\n    legalManagementClassificationCode: \"C\",\n  },\n];\n\n// --- Column Definitions for DataTable ---\nconst columns: ColumnDef<LegalInfoData>[] = [\n  { accessorKey: \"id\", header: \"순번\" },\n  { accessorKey: \"accountNumber\", header: \"계좌번호\" },\n  { accessorKey: \"applicantName\", header: \"신청인명\" },\n  { accessorKey: \"caseNumber\", header: \"사건번호\" },\n  { accessorKey: \"status\", header: \"상태\" },\n  { accessorKey: \"courtName\", header: \"법원명\" },\n  { accessorKey: \"receiptDate\", header: \"접수일자\" },\n  { accessorKey: \"startDate\", header: \"개시일자\" },\n  { accessorKey: \"approvalDate\", header: \"인가일자\" },\n  { accessorKey: \"withdrawalDate\", header: \"취하일자\" },\n];\n\nexport default function LegalInfoSyncPage() {\n  const tabId = usePathname();\n  const { currentState, loadState, updateFilters, updateTableData } = usePageStore();\n\n  const [filters, setFilters] = useState<Record<string, any>>(currentState?.filters || {});\n  const [tableData, setTableData] = useState<LegalInfoData[]>(currentState?.tables?.legalInfoTable || []);\n\n  useEffect(() => {\n    loadState(tabId);\n  }, [tabId, loadState]);\n\n\n  const filterLayout: FilterLayout = useMemo(() => ([\n    {\n      type: \"grid\",\n      columns: 4,\n      filters: [\n        {\n          name: \"bondType\",\n          type: \"select\",\n          label: \"채권종류\",\n          options: [\n            { value: \"all\", label: \"전체\" },\n            { value: \"general\", label: \"일반채권\" },\n            { value: \"special\", label: \"특수채권\" },\n          ],\n          defaultValue: \"all\",\n        },\n        {\n          name: \"webcashInquiry\",\n          type: \"select\",\n          label: \"웹캐시조회\",\n          options: [\n            { value: \"all\", label: \"전체\" },\n            { value: \"yes\", label: \"예\" },\n            { value: \"no\", label: \"아니오\" },\n          ],\n          defaultValue: \"all\",\n        },\n        { name: \"customerNumber\", type: \"text\", label: \"고객번호\" },\n        { name: \"caseNumber\", type: \"text\", label: \"사건번호\" },\n      ],\n    },\n  ]), []);\n\n  useEffect(() => {\n    updateFilters(tabId, filters);\n  }, [tabId, filters, updateFilters]);\n\n  useEffect(() => {\n    updateTableData(tabId, \"legalInfoTable\", tableData);\n  }, [tabId, tableData, updateTableData]);\n\n  useEffect(() => {\n    const handlePopupMessage = (message: any) => {\n      if (message.targetTabId !== tabId) return;\n      console.log(\"Received message from popup:\", message);\n    };\n\n    const cleanup = listenForPopupMessages(handlePopupMessage);\n    return cleanup;\n  }, [tabId]);\n\n  const handleFilterChange = useCallback((name: string, value: any) => {\n    setFilters((prev) => ({ ...prev, [name]: value }));\n  }, []);\n\n  const handleSearch = () => {\n    console.log(\"Searching with filters:\", filters);\n    setTableData(mockData);\n  };\n\n  const handleFirstRequest = () => {\n    alert(\"1차 요청 자료 기능 실행\");\n  };\n\n  const handleSecondRequest = () => {\n    alert(\"2차 요청 자료 기능 실행\");\n  };\n\n  const handleSync = () => {\n    alert(\"동기화 기능 실행\");\n  };\n\n  const handleExcelDownload = () => {\n    alert(\"엑셀 다운로드 기능 실행\");\n  };\n\n  const handleRowDoubleClick = (row: LegalInfoData) => {\n    const popupWidth = 1600;\n    const popupHeight = 800;\n    const left = (window.screen.width / 2) - (popupWidth / 2);\n    const top = (window.screen.height / 2) - (popupHeight / 2);\n\n    const popupUrl = `/popup/legal-management?openerTabId=${tabId}` +\n                     `&customerNumber=${row.customerNumber}` +\n                     `&residentNumber=${row.residentNumber}` +\n                     `&legalManagementNumber=${row.legalManagementNumber}` +\n                     `&legalManagementClassificationCode=${row.legalManagementClassificationCode}`;\n\n    window.open(\n      popupUrl,\n      \"LegalManagementPopup\",\n      `width=${popupWidth},height=${popupHeight},left=${left},top=${top}`\n    );\n  };\n\n  if (!currentState) return null;\n\n  return (\n    <div className=\"flex flex-col gap-3\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <img src={TitleIcon} alt=\"타이틀 아이콘\" width={40} height={40} />\n          <h2 className=\"text-lg font-semibold\">법무정보 동기화</h2>\n        </div>\n        <Breadcrumb>\n          <BreadcrumbList>\n            <BreadcrumbItem>홈</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>여신사후</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>법적조치</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>\n              <BreadcrumbPage>법무정보 동기화</BreadcrumbPage>\n            </BreadcrumbItem>\n          </BreadcrumbList>\n        </Breadcrumb>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <LeftActions\n          actions={[\n            { id: \"first-request\", onClick: handleFirstRequest },\n            { id: \"second-request\", onClick: handleSecondRequest },\n            { id: \"sync\", onClick: handleSync },\n          ]}\n        />\n        <RightActions\n          actions={[\n            { id: \"excel\", onClick: handleExcelDownload },\n            { id: \"search\", onClick: handleSearch },\n          ]}\n        />\n      </div>\n\n      <div className=\"flex flex-col gap-4\">\n        <h3 className=\"font-semibold\">법무정보 동기화</h3>\n        <FilterContainer\n          filterLayout={filterLayout}\n          values={filters}\n          onChange={handleFilterChange}\n        />\n      </div>\n\n      <DataTable\n        title=\"조회 내용\"\n        columns={columns}\n        data={tableData}\n        onRowDoubleClick={handleRowDoubleClick}\n      />\n    </div>\n  );\n}\n"],"names":["mockData","columns","LegalInfoSyncPage","tabId","usePathname","currentState","loadState","updateFilters","updateTableData","usePageStore","filters","setFilters","useState","tableData","setTableData","_a","useEffect","filterLayout","useMemo","listenForPopupMessages","message","handleFilterChange","useCallback","name","value","prev","handleSearch","handleFirstRequest","handleSecondRequest","handleSync","handleExcelDownload","handleRowDoubleClick","row","left","top","popupUrl","jsxs","jsx","TitleIcon","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbSeparator","BreadcrumbPage","LeftActions","RightActions","FilterContainer","DataTable"],"mappings":"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"}