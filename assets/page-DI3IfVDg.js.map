{"version":3,"file":"page-DI3IfVDg.js","sources":["../../src/pages/dashboard/after-loan/collective-registration-of-bonds-for-sale/page.tsx"],"sourcesContent":["\n\nimport { usePathname } from \"@/lib/hooks/useAppLocation\";\nimport { useCallback, useState } from \"react\";\nimport { usePageStore } from \"@/lib/store/pageStore\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbList,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n} from \"@/components/ui/breadcrumb\";\nimport { CustomTabs as Tabs, CustomTabsContent as TabsContent, CustomTabsList as TabsList, CustomTabsTrigger as TabsTrigger } from \"@/components/app/CustomTabs\";\nimport { LeftActions } from \"@/components/app/LeftActions\";\nimport { RightActions, ActionType } from \"@/components/app/RightActions\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport type { FilterLayout } from \"@/components/filters/types\";\nimport { FilterContainer } from \"@/components/filters/FilterContainer\";\nimport { FilterFileUpload } from \"@/components/filters/FilterFileUpload\";\nimport TitleIcon from \"@/assets/icons/webp/title-icon.webp\";\nimport { ColumnDef } from \"@tanstack/react-table\";\n\n// 1. Type Definitions\ntype BondsForSaleItem = {\n  id: number;\n  customerName: string;\n  customerNo: string;\n  accountNo: string;\n  saleYearMonth: string;\n  searchStartDate: string;\n  searchEndDate: string;\n  companyName: string;\n  companyContact: string;\n  companyAddress: string;\n  saleQuarter: string;\n};\n\n// 2. Column Definitions\nconst createColumn = (accessorKey: string, header: string): ColumnDef<BondsForSaleItem> => ({\n  accessorKey,\n  header,\n});\n\nconst columns: ColumnDef<BondsForSaleItem>[] = [\n  createColumn(\"customerName\", \"고객명\"),\n  createColumn(\"customerNo\", \"고객번호\"),\n  createColumn(\"accountNo\", \"계좌번호\"),\n  createColumn(\"saleYearMonth\", \"매각연월\"),\n  createColumn(\"searchStartDate\", \"조회시작일\"),\n  createColumn(\"searchEndDate\", \"조회종료일\"),\n  createColumn(\"companyName\", \"업체명\"),\n  createColumn(\"companyContact\", \"업체연락처\"),\n  createColumn(\"companyAddress\", \"업체주소\"),\n  createColumn(\"saleQuarter\", \"매각분기\"),\n];\n\n// 3. Mock Data\nconst mockData: BondsForSaleItem[] = Array.from({ length: 5 }, (_, i) => ({\n  id: i + 1,\n  customerName: `고객${i + 1}`,\n  customerNo: `CUST${1000 + i}`,\n  accountNo: `123-45-6789${i}`,\n  saleYearMonth: \"2024-01\",\n  searchStartDate: \"2024-01-01\",\n  searchEndDate: \"2024-01-31\",\n  companyName: `매각업체${i + 1}`,\n  companyContact: \"02-1234-5678\",\n  companyAddress: \"서울시 강남구\",\n  saleQuarter: \"1분기\",\n}));\n\nexport default function CollectiveRegistrationOfBondsForSalePage() {\n  const tabId = usePathname();\n  const { currentState, updateFilters, updateTableData, clearState } = usePageStore();\n  const [activeTab, setActiveTab] = useState(\"inquiry\");\n\n  const handleFilterChange = useCallback(\n    (name: string, value: any) => {\n      updateFilters(tabId, { [name]: value });\n    },\n    [tabId, updateFilters]\n  );\n\n  const handleSearch = () => {\n    console.log(\"Searching...\");\n    updateTableData(tabId, 'bondsTable', mockData);\n  };\n\n  const handleReset = () => {\n    clearState(tabId);\n  };\n\n  const handleRegister = () => {\n    console.log(\"Registering...\");\n  };\n\n  // // 멀티 엑셀 다운로드 팝업으로 변경 시, 아래 주석 처리된 코드를 사용하세요.\n  // const handleExcelDownload = () => {\n  //   const width = 360;\n  //   const height = 200;\n  //   const left = window.screen.width / 2 - width / 2;\n  //   const top = window.screen.height / 2 - height / 2;\n  //   window.open(\n  //     `/popup/multi-excel-download`,\n  //     \"MultiExcelDownload\",\n  //     `width=${width},height=${height},left=${left},top=${top}`\n  //   );\n  // };\n\n  const handleExcelDownload = () => {\n    const simpleColumns = columns.map((col) => ({\n      accessorKey: (col as any).accessorKey,\n      header: (col as any).header,\n    }));\n    const encodedColumns = encodeURIComponent(JSON.stringify(simpleColumns));\n    const width = 500;\n    const height = 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n\n    window.open(\n      `/popup/excel-download?columns=${encodedColumns}`,\n      \"ExcelDownload\",\n      `width=${width},height=${height},left=${left},top=${top}`\n    );\n  };\n\n  // Fix layout for Row 3: \"매각분기\" should be one conceptual unit. \n  // FilterContainer grid simply flows. \n  // Let's adjust Row 3 to look better.\n  const inquiryFilterLayout: FilterLayout = [\n    {\n      type: \"grid\",\n      columns: 3,\n      filters: [\n        { name: \"regDate\", type: \"date-range\", label: \"등록일자\" },\n        { name: \"customerNo\", type: \"search\", label: \"고객번호\" },\n        { name: \"customerName\", type: \"text\", label: \"고객명\" },\n        \n        { name: \"saleProcessDate\", type: \"date-range\", label: \"매각 처리일\" },\n        { name: \"companyName\", type: \"text\", label: \"업체명\" },\n        { name: \"accountNo\", type: \"text\", label: \"계좌번호\" },\n      ]\n    },\n    {\n        type: \"grid\",\n        columns: 4, // Use 4 cols to fit the quarter split better or just standard 3\n        filters: [\n            { name: \"saleYear\", type: \"text\", label: \"매각분기(년)\" },\n            { name: \"saleQuarter\", type: \"select\", label: \"분기\", options: [{value: \"1\", label: \"1분기\"}, {value: \"2\", label: \"2분기\"}] },\n            { name: \"pool\", type: \"text\", label: \"pool\" },\n            { name: \"generalSpecial\", type: \"select\", label: \"일반/특수\", options: [{value: \"general\", label: \"일반\"}, {value: \"special\", label: \"특수\"}] },\n        ]\n    }\n  ];\n\n  const leftActions = activeTab === 'inquiry' \n    ? [{ id: 'history-list' as any }, { id: 'history-zip' as any }]\n    : [];\n\n  const rightActions = activeTab === 'inquiry'\n    ? [\n        { id: 'excel' as ActionType, onClick: handleExcelDownload },\n        { id: 'search' as ActionType, onClick: handleSearch },\n        { id: 'reset' as ActionType, onClick: handleReset }\n      ]\n    : [\n        { id: 'register' as ActionType, onClick: handleRegister },\n        { id: 'reset' as ActionType, onClick: handleReset }\n      ];\n\n  if (!currentState) return null;\n\n  const rowCount = currentState.tables?.['bondsTable']?.length || 0;\n\n  return (\n    <div className=\"flex flex-col gap-6 pb-10\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <img src={TitleIcon} alt=\"타이틀 아이콘\" width={40} height={40} />\n          <h2 className=\"text-lg font-semibold\">매각채권일괄등록</h2>\n        </div>\n        <Breadcrumb>\n          <BreadcrumbList>\n            <BreadcrumbItem>홈</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>여신사후</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>\n              <BreadcrumbPage>매각채권일괄등록</BreadcrumbPage>\n            </BreadcrumbItem>\n          </BreadcrumbList>\n        </Breadcrumb>\n      </div>\n\n      {/* Actions Row */}\n      <div className=\"flex items-center justify-between\">\n        <LeftActions actions={leftActions} />\n        <RightActions actions={rightActions} />\n      </div>\n\n      {/* Tabs Area */}\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList>\n          <TabsTrigger value=\"inquiry\">조회</TabsTrigger>\n          <TabsTrigger value=\"registration\">일괄등록</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"inquiry\" className=\"flex flex-col gap-4 mt-0\">\n            <FilterContainer \n                filterLayout={inquiryFilterLayout}\n                values={currentState.filters}\n                onChange={handleFilterChange}\n            />\n            \n            <DataTable \n                title=\"조회내용\"\n                columns={columns}\n                data={currentState.tables?.['bondsTable'] || []}\n            />\n        </TabsContent>\n\n        <TabsContent value=\"registration\" className=\"flex flex-col gap-4 mt-0\">\n            <div className=\"rounded-lg border px-4 py-4\">\n              <FilterFileUpload label=\"엑셀파일\" buttons={['browse']} />\n            </div>\n            \n            <DataTable \n                title=\"조회내용\"\n                columns={columns}\n                data={currentState.tables?.['bondsTable'] || []}\n            />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n"],"names":["createColumn","accessorKey","header","columns","mockData","_","i","CollectiveRegistrationOfBondsForSalePage","tabId","usePathname","currentState","updateFilters","updateTableData","clearState","usePageStore","activeTab","setActiveTab","useState","handleFilterChange","useCallback","name","value","handleSearch","handleReset","handleRegister","handleExcelDownload","simpleColumns","col","encodedColumns","width","height","left","top","inquiryFilterLayout","leftActions","rightActions","_b","_a","jsxs","jsx","TitleIcon","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbSeparator","BreadcrumbPage","LeftActions","RightActions","Tabs","TabsList","TabsTrigger","TabsContent","FilterContainer","DataTable","_c","FilterFileUpload","_d"],"mappings":"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"}