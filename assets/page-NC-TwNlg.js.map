{"version":3,"file":"page-NC-TwNlg.js","sources":["../../src/pages/popup/case-inquiry/page.tsx"],"sourcesContent":["\n\nimport { useState, useEffect, useCallback, Suspense, useMemo } from \"react\";\nimport { useSearchParams } from \"@/lib/hooks/useAppLocation\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport { FilterContainer } from \"@/components/filters/FilterContainer\";\nimport { PopupRightActions, PopupAction } from \"@/components/app/PopupRightActions\";\nimport type { FilterLayout } from \"@/components/filters/types\";\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { postPopupMessage } from \"@/lib/popup-bus\";\n\n// Data type for the table\ntype CaseData = {\n  curRow: number;\n  IfaffManageDstcd: string; // 관리구분\n  rnmNo: string; // 실명번호\n  custNm: string; // 고객명\n  csNo: string; // 사건번호 (표시용)\n  csYy: string; // 사건년월 (데이터용)\n  csKind: string; // 사건종류 (데이터용)\n  csNoSeq: string; // 사건일련번호 (데이터용)\n  csNm: string; // 사건명\n  cortCo: string; // 법원명\n  lfaffPrgsSttsCd: string; // 진행상태\n};\n\n// Mock data\nconst mockData: CaseData[] = Array.from({ length: 15 }, (_, i) => ({\n  curRow: i + 1,\n  IfaffManageDstcd: i % 2 === 0 ? \"개인회생\" : \"파산면책\",\n  rnmNo: `800101-123456${i % 10}`,\n  custNm: `고객${i + 1}`,\n  csNo: `${String(100000 + i).padStart(6, '0')}${(i % 26 + 10).toString(36).toUpperCase()}`,\n  csYy: \"2024\",\n  csKind: \"가단\",\n  csNoSeq: `${10000 + i}`,\n  csNm: `대여금 반환 청구의 소 ${i + 1}`,\n  cortCo: \"서울중앙지방법원\",\n  lfaffPrgsSttsCd: \"진행중\",\n}));\n\n// Columns\nconst columns: ColumnDef<CaseData>[] = [\n  { accessorKey: \"curRow\", header: \"순번\" },\n  { accessorKey: \"IfaffManageDstcd\", header: \"관리구분\" },\n  { accessorKey: \"rnmNo\", header: \"실명번호\" },\n  { accessorKey: \"custNm\", header: \"고객명\" },\n  { accessorKey: \"csNo\", header: \"사건번호\" },\n  { accessorKey: \"csNm\", header: \"사건명\" },\n  { accessorKey: \"cortCo\", header: \"법원명\" },\n  { accessorKey: \"lfaffPrgsSttsCd\", header: \"진행상태\" },\n];\n\nfunction CaseInquiryPopupContent() {\n  const searchParams = useSearchParams();\n  const [filters, setFilters] = useState<Record<string, any>>({});\n  const [tableData, setTableData] = useState<CaseData[]>([]);\n  const openerTabId = searchParams.get(\"openerTabId\");\n\n  // Initialize filters from URL\n  useEffect(() => {\n    const newFilters: Record<string, any> = {};\n    const birthDate = searchParams.get(\"birthDate\");\n    const customerName = searchParams.get(\"customerName\");\n    const caseNumber = searchParams.get(\"caseNumber\");\n\n    if (birthDate) newFilters.birthDate = birthDate;\n    if (customerName) newFilters.customerName = customerName;\n    if (caseNumber) newFilters.caseNumber = caseNumber;\n\n    setFilters(newFilters);\n    \n    if (Object.keys(newFilters).length > 0) {\n      setTableData(mockData);\n    }\n  }, [searchParams]);\n\n  const handleFilterChange = useCallback((name: string, value: any) => {\n    setFilters((prev) => ({ ...prev, [name]: value }));\n  }, []);\n\n  const handleSearch = () => {\n    console.log(\"Searching with filters:\", filters);\n    setTableData(mockData);\n  };\n\n  // Filter Layout\n  const filterLayout: FilterLayout = useMemo(() => [\n    {\n      type: \"grid\",\n      columns: 3,\n      filters: [\n        { name: \"birthDate\", type: \"text\", label: \"생년월일\" },\n        { name: \"customerName\", type: \"text\", label: \"고객명\" },\n        { name: \"caseNumber\", type: \"text\", label: \"사건번호\" },\n      ],\n    },\n  ], []);\n\n  const popupActions: PopupAction[] = [\n    { id: \"search\", text: \"조회\", onClick: handleSearch },\n    { id: \"close\", text: \"닫기\", onClick: () => window.close() },\n  ];\n\n  const handleRowDoubleClick = (row: CaseData) => {\n    if (openerTabId) {\n      postPopupMessage({\n        targetTabId: openerTabId,\n        source: 'case-inquiry',\n        payload: row,\n      });\n      window.close();\n    } else {\n      console.error(\"Opener Tab ID missing\");\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-4 p-4 bg-gray-50 min-h-screen\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-xl font-bold\">사건 조회</h2>\n        <PopupRightActions actions={popupActions} />\n      </div>\n\n      <div className=\"border-t pt-4\">\n        <h3 className=\"font-semibold mb-2\">사건 검색</h3>\n        <FilterContainer\n          filterLayout={filterLayout}\n          values={filters}\n          onChange={handleFilterChange}\n        />\n      </div>\n\n      <div className=\"flex-grow\">\n        <DataTable\n          title=\"사건 목록\"\n          columns={columns}\n          data={tableData}\n          onRowDoubleClick={handleRowDoubleClick}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default function CaseInquiryPopupPage() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <CaseInquiryPopupContent />\n    </Suspense>\n  );\n}\n"],"names":["mockData","_","i","columns","CaseInquiryPopupContent","searchParams","useSearchParams","filters","setFilters","useState","tableData","setTableData","openerTabId","useEffect","newFilters","birthDate","customerName","caseNumber","handleFilterChange","useCallback","name","value","prev","handleSearch","filterLayout","useMemo","popupActions","handleRowDoubleClick","row","postPopupMessage","jsxs","jsx","PopupRightActions","FilterContainer","DataTable","CaseInquiryPopupPage","Suspense"],"mappings":"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"}