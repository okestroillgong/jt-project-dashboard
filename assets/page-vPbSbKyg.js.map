{"version":3,"file":"page-vPbSbKyg.js","sources":["../../src/pages/popup/modification-history/page.tsx"],"sourcesContent":["\n\nimport { useState, useEffect, Suspense } from \"react\";\nimport { useSearchParams } from \"@/lib/hooks/useAppLocation\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport { PopupRightActions, PopupAction } from \"@/components/app/PopupRightActions\";\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { postPopupMessage } from \"@/lib/popup-bus\";\n\n// Data type for the table\ntype HistoryData = {\n  id: number;\n  accountNumber: string;\n  customerNumber: string;\n  customerName: string;\n  changeItem: string;\n  beforeChange: string;\n  afterChange: string;\n  modifier: string;\n  changeDate: string;\n  changeTime: string;\n};\n\n// Mock data for the table\nconst mockData: HistoryData[] = Array.from({ length: 10 }, (_, i) => ({\n  id: i + 1,\n  accountNumber: \"123-456-7890\",\n  customerNumber: \"CUST001\",\n  customerName: \"홍길동\",\n  changeItem: i % 2 === 0 ? \"주소\" : \"전화번호\",\n  beforeChange: i % 2 === 0 ? \"서울시 강남구\" : \"010-1111-2222\",\n  afterChange: i % 2 === 0 ? \"서울시 서초구\" : \"010-3333-4444\",\n  modifier: \"관리자\",\n  changeDate: \"2024-01-01\",\n  changeTime: \"12:00:00\",\n}));\n\n// Column definitions for the table\nconst columns: ColumnDef<HistoryData>[] = [\n  { accessorKey: \"id\", header: \"순번\" },\n  { accessorKey: \"accountNumber\", header: \"계좌번호\" },\n  { accessorKey: \"customerNumber\", header: \"신청고객번호\" },\n  { accessorKey: \"customerName\", header: \"신청인명\" },\n  { accessorKey: \"changeItem\", header: \"변경항목\" },\n  { accessorKey: \"beforeChange\", header: \"변경이전내용\" },\n  { accessorKey: \"afterChange\", header: \"변경이후내용\" },\n  { accessorKey: \"modifier\", header: \"변경 사용자\" },\n  { accessorKey: \"changeDate\", header: \"변경일자\" },\n  { accessorKey: \"changeTime\", header: \"변경시각\" },\n];\n\nfunction ModificationHistoryPopupContent() {\n  const searchParams = useSearchParams();\n  const [data, setData] = useState<HistoryData[]>([]);\n  const openerTabId = searchParams.get(\"openerTabId\");\n\n  useEffect(() => {\n    const customerNumber = searchParams.get(\"customerNumber\");\n    const accountNumber = searchParams.get(\"accountNumber\");\n\n    // In a real application, you would fetch data here using these parameters\n    // For now, we just use the mock data\n    if (customerNumber || accountNumber) {\n        setData(mockData);\n    }\n  }, [searchParams]);\n\n  const handleSearch = () => {\n     // Reload or fetch data logic would go here\n     setData(mockData);\n  };\n\n  const handleRowDoubleClick = (row: HistoryData) => {\n    if (openerTabId) {\n      postPopupMessage({\n        targetTabId: openerTabId,\n        source: 'modification-history',\n        payload: row,\n      });\n      window.close();\n    }\n  };\n\n  const popupActions: PopupAction[] = [\n    { id: \"search\", text: \"조회\", onClick: handleSearch },\n    { id: \"close\", text: \"닫기\", onClick: () => window.close() },\n  ];\n\n  return (\n    <div className=\"flex flex-col gap-4 p-4 bg-gray-50 min-h-screen\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-xl font-bold\">수정내역</h2>\n        <PopupRightActions actions={popupActions} />\n      </div>\n\n      <div className=\"flex-grow\">\n        <DataTable columns={columns} data={data} onRowDoubleClick={handleRowDoubleClick} />\n      </div>\n    </div>\n  );\n}\n\nexport default function ModificationHistoryPopupPage() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <ModificationHistoryPopupContent />\n    </Suspense>\n  );\n}"],"names":["mockData","_","i","columns","ModificationHistoryPopupContent","searchParams","useSearchParams","data","setData","useState","openerTabId","useEffect","customerNumber","accountNumber","handleSearch","handleRowDoubleClick","row","postPopupMessage","popupActions","jsxs","jsx","PopupRightActions","DataTable","ModificationHistoryPopupPage","Suspense"],"mappings":"sPAwBA,MAAMA,EAA0B,MAAM,KAAK,CAAE,OAAQ,IAAM,CAACC,EAAGC,KAAO,CACpE,GAAIA,EAAI,EACR,cAAe,eACf,eAAgB,UAChB,aAAc,MACd,WAAYA,EAAI,IAAM,EAAI,KAAO,OACjC,aAAcA,EAAI,IAAM,EAAI,UAAY,gBACxC,YAAaA,EAAI,IAAM,EAAI,UAAY,gBACvC,SAAU,MACV,WAAY,aACZ,WAAY,UACd,EAAE,EAGIC,EAAoC,CACxC,CAAE,YAAa,KAAM,OAAQ,IAAA,EAC7B,CAAE,YAAa,gBAAiB,OAAQ,MAAA,EACxC,CAAE,YAAa,iBAAkB,OAAQ,QAAA,EACzC,CAAE,YAAa,eAAgB,OAAQ,MAAA,EACvC,CAAE,YAAa,aAAc,OAAQ,MAAA,EACrC,CAAE,YAAa,eAAgB,OAAQ,QAAA,EACvC,CAAE,YAAa,cAAe,OAAQ,QAAA,EACtC,CAAE,YAAa,WAAY,OAAQ,QAAA,EACnC,CAAE,YAAa,aAAc,OAAQ,MAAA,EACrC,CAAE,YAAa,aAAc,OAAQ,MAAA,CACvC,EAEA,SAASC,GAAkC,CACzC,MAAMC,EAAeC,EAAA,EACf,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAwB,CAAA,CAAE,EAC5CC,EAAcL,EAAa,IAAI,aAAa,EAElDM,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAiBP,EAAa,IAAI,gBAAgB,EAClDQ,EAAgBR,EAAa,IAAI,eAAe,GAIlDO,GAAkBC,IAClBL,EAAQR,CAAQ,CAEtB,EAAG,CAACK,CAAY,CAAC,EAEjB,MAAMS,EAAe,IAAM,CAExBN,EAAQR,CAAQ,CACnB,EAEMe,EAAwBC,GAAqB,CAC7CN,IACFO,EAAiB,CACf,YAAaP,EACb,OAAQ,uBACR,QAASM,CAAA,CACV,EACD,OAAO,MAAA,EAEX,EAEME,EAA8B,CAClC,CAAE,GAAI,SAAU,KAAM,KAAM,QAASJ,CAAA,EACrC,CAAE,GAAI,QAAS,KAAM,KAAM,QAAS,IAAM,OAAO,MAAA,CAAM,CAAE,EAG3D,OACEK,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,OAAI,EACtCA,EAAAA,IAACC,EAAA,CAAkB,QAASH,CAAA,CAAc,CAAA,EAC5C,EAEAE,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAA,EAAAA,IAACE,GAAU,QAAAnB,EAAkB,KAAAI,EAAY,iBAAkBQ,CAAA,CAAsB,CAAA,CACnF,CAAA,EACF,CAEJ,CAEA,SAAwBQ,GAA+B,CACrD,OACEH,EAAAA,IAACI,EAAAA,UAAS,SAAUJ,EAAAA,IAAC,OAAI,SAAA,YAAA,CAAU,EACjC,SAAAA,EAAAA,IAAChB,EAAA,CAAA,CAAgC,CAAA,CACnC,CAEJ"}