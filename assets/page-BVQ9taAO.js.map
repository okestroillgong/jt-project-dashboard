{"version":3,"file":"page-BVQ9taAO.js","sources":["../../src/pages/dashboard/after-loan/special-bond/management-ledger/page.tsx"],"sourcesContent":["\n\nimport { usePathname } from \"@/lib/hooks/useAppLocation\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { usePageStore } from \"@/lib/store/pageStore\";\nimport { listenForPopupMessages } from \"@/lib/popup-bus\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbList,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n} from \"@/components/ui/breadcrumb\";\nimport { LeftActions } from \"@/components/app/LeftActions\";\nimport { RightActions } from \"@/components/app/RightActions\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport { FilterContainer } from \"@/components/filters/FilterContainer\";\nimport type { FilterLayout } from \"@/components/filters/types\";\nimport TitleIcon from \"@/assets/icons/webp/title-icon.webp\";\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { CustomTabs as Tabs, CustomTabsContent as TabsContent, CustomTabsList as TabsList, CustomTabsTrigger as TabsTrigger } from \"@/components/app/CustomTabs\";\n\n// Data type for the table\ntype SpecialBondData = {\n  id: number;\n  inclusionDate: string;\n  inclusionReason: string;\n  accountNumber: string;\n  \n  // Inclusion Bond Details\n  inclusionPrincipal: number;\n  inclusionInterest: number;\n  inclusionTotal: number;\n\n  // Recovery Details\n  recoveryPrincipal: number;\n  recoveryInterest: number;\n  recoveryTotal: number;\n};\n\n// Example data\nconst mockData: SpecialBondData[] = [\n  {\n    id: 1,\n    inclusionDate: \"20240101\",\n    inclusionReason: \"연체\",\n    accountNumber: \"123-456-7890\",\n    inclusionPrincipal: 10000000,\n    inclusionInterest: 500000,\n    inclusionTotal: 10500000,\n    recoveryPrincipal: 1000000,\n    recoveryInterest: 50000,\n    recoveryTotal: 1050000,\n  },\n  {\n    id: 2,\n    inclusionDate: \"20240201\",\n    inclusionReason: \"부실\",\n    accountNumber: \"987-654-3210\",\n    inclusionPrincipal: 20000000,\n    inclusionInterest: 1000000,\n    inclusionTotal: 21000000,\n    recoveryPrincipal: 0,\n    recoveryInterest: 0,\n    recoveryTotal: 0,\n  },\n];\n\n// Column definitions with multi-level headers\nconst columns: ColumnDef<SpecialBondData>[] = [\n  {\n    accessorKey: \"inclusionDate\",\n    header: \"편입일자\",\n  },\n  {\n    accessorKey: \"inclusionReason\",\n    header: \"편입사유\",\n  },\n  {\n    accessorKey: \"accountNumber\",\n    header: \"계좌번호\",\n  },\n  {\n    header: \"편입당시 채권내용\",\n    columns: [\n      {\n        accessorKey: \"inclusionPrincipal\",\n        header: \"원금\",\n      },\n      {\n        accessorKey: \"inclusionInterest\",\n        header: \"이자\",\n      },\n      {\n        accessorKey: \"inclusionTotal\",\n        header: \"계\",\n      },\n    ],\n  },\n  {\n    header: \"채권회수내용\",\n    columns: [\n      {\n        accessorKey: \"recoveryPrincipal\",\n        header: \"원금\",\n      },\n      {\n        accessorKey: \"recoveryInterest\",\n        header: \"이자\",\n      },\n      {\n        accessorKey: \"recoveryTotal\",\n        header: \"계\",\n      },\n    ],\n  },\n];\n\nexport default function SpecialBondLedgerPage() {\n  const tabId = usePathname();\n  const { currentState, updateFilters, clearState } = usePageStore();\n  const [activeTab, setActiveTab] = useState(\"bond-details\");\n\n  useEffect(() => {\n    const cleanup = listenForPopupMessages((message) => {\n      if (message.targetTabId !== tabId || message.source !== 'customer-search') return;\n      \n      const customer = message.payload;\n      const sourceFilter = customer.sourceFilter;\n\n      if (sourceFilter === 'customerNumber') {\n        updateFilters(tabId, { \n          customerNumber: customer.centralCustomerNumber,\n          customerName: customer.customerName \n        });\n      }\n    });\n    return cleanup;\n  }, [tabId, updateFilters]);\n\n  const filterLayout: FilterLayout = [\n    {\n      type: \"grid\",\n      columns: 2,\n      filters: [\n        { \n          name: \"customerNumber\", \n          type: \"long-search\", \n          label: \"고객번호\",\n          onButtonClick: (value?: any, e?: React.MouseEvent<HTMLElement>) => {\n            e?.preventDefault();\n            e?.stopPropagation();\n            const customerNumber = value || '';\n            const customerName = currentState?.filters.customerName || '';\n            window.open(`/popup/customer-search?customerNumber=${customerNumber}&customerName=${customerName}&openerTabId=${tabId}&sourceFilter=customerNumber`, 'CustomerSearch', 'width=1600,height=800');\n          }\n        },\n        { \n          name: \"customerName\", \n          type: \"text\", \n          label: \"고객명\",\n          readonly: true \n        },\n      ],\n    },\n  ];\n\n  const handleFilterChange = useCallback(\n    (name: string, value: any) => {\n      updateFilters(tabId, { [name]: value });\n    },\n    [tabId, updateFilters]\n  );\n\n  const handleRowClick = (row: SpecialBondData) => {\n    console.log(\"Row clicked:\", row);\n  };\n\n  const totalRows = mockData.length;\n\n  if (!currentState) return null;\n\n  return (\n    <div className=\"flex flex-col gap-3\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <img src={TitleIcon} alt=\"타이틀 아이콘\" width={40} height={40} />\n          <h2 className=\"text-lg font-semibold\">특수채권 관리대장</h2>\n        </div>\n        <Breadcrumb>\n          <BreadcrumbList>\n            <BreadcrumbItem>홈</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>여신사후</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>특수채권</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>\n              <BreadcrumbPage>특수채권 관리대장</BreadcrumbPage>\n            </BreadcrumbItem>\n          </BreadcrumbList>\n        </Breadcrumb>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <LeftActions \n          actions={[{ id: \"compare\" }]} \n        />\n        <RightActions\n          actions={[\n            { id: \"print\" },\n            { id: \"search\" },\n            { id: \"data-reset\", onClick: () => clearState(tabId) },\n          ]}\n        />\n      </div>\n\n      <div>\n        <FilterContainer \n          filterLayout={filterLayout} \n          values={currentState.filters}\n          onChange={handleFilterChange}\n        />\n      </div>\n\n      {/* 탭과 테이블을 감싸는 영역 */}\n      <div className=\"flex flex-col\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"justify-start bg-transparent p-0\">\n            <TabsTrigger value=\"bond-details\">채권내용</TabsTrigger>\n            <TabsTrigger value=\"address-change\">채무관련자 주소 변경</TabsTrigger>\n            <TabsTrigger value=\"statute-limit\">시효 관리 내용</TabsTrigger>\n            <TabsTrigger value=\"counseling\">상담관리</TabsTrigger>\n            <TabsTrigger value=\"legal-procedure\">발견재산 및 법적 절차</TabsTrigger>\n            <TabsTrigger value=\"provisional-payment\">가지급금 지급 내용</TabsTrigger>\n          </TabsList>\n        </Tabs>\n\n        {/* 테이블 영역 - 탭 아래에 바로 붙음 */}\n        <div className=\"p-0\">\n            {/* 테이블의 자체 border를 없애거나 조정해야 깔끔할 수 있음 */}\n            <div className=\"[&_div.rounded-md.border]:border-0\">\n              <DataTable\n                columns={columns}\n                data={mockData}\n                amountColumns={[\"inclusionPrincipal\", \"inclusionInterest\", \"inclusionTotal\", \"recoveryPrincipal\", \"recoveryInterest\", \"recoveryTotal\"]}\n                dateColumnConfig={{ inclusionDate: \"YYYYMMDD\" }}\n                onRowClick={handleRowClick}\n              />\n            </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["mockData","columns","SpecialBondLedgerPage","tabId","usePathname","currentState","updateFilters","clearState","usePageStore","activeTab","setActiveTab","useState","useEffect","listenForPopupMessages","message","customer","filterLayout","value","e","customerNumber","customerName","handleFilterChange","useCallback","name","handleRowClick","row","jsxs","jsx","TitleIcon","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbSeparator","BreadcrumbPage","LeftActions","RightActions","FilterContainer","Tabs","TabsList","TabsTrigger","DataTable"],"mappings":"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"}