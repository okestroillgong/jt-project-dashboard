import{j as e,r as n,U as P}from"./index-u5m4l9UG.js";import{T as y}from"./textarea-CIbYvi8i.js";import{S as R,a as A,b as I,c as D,d as i}from"./select-CUHv8fEa.js";import{C as N}from"./checkbox-DnKtZFHZ.js";import{T as E,a as F,b as u,c as d,d as H,e as l}from"./table-u1qDuHlO.js";import{P as U}from"./PopupRightActions-BoyVaNKG.js";import"./Combination-DqnN4WXn.js";import"./index-DXJMQJtd.js";const V=[{id:1,opinion:"건전성 지표가 양호합니다.",registrant:"홍길동"},{id:2,opinion:"특이사항 없습니다.",registrant:"이순신"}];function z(){const h=P();h.get("openerTabId");const S=h.get("selectedMonth")||"202401",x=h.get("monthOptions"),[C,v]=n.useState(S),[j,k]=n.useState([]),[a,m]=n.useState(""),[r,b]=n.useState(V),[o,c]=n.useState([]);n.useEffect(()=>{if(x)try{const s=JSON.parse(decodeURIComponent(x));k(s)}catch(s){console.error("Failed to parse month options:",s)}},[x]);const g=n.useCallback(()=>{if(!a.trim())return;const s={id:Math.max(0,...r.map(t=>t.id))+1,opinion:a,registrant:"관리자"};b(t=>[...t,s]),m("")},[a,r]),f=n.useCallback(()=>{b(s=>s.filter(t=>!o.includes(t.id))),c([])},[o]),T=s=>{c(t=>t.includes(s)?t.filter(p=>p!==s):[...t,s])},O=s=>{c(s?r.map(t=>t.id):[])},w=s=>{m(s)},M=n.useMemo(()=>[{id:"register",text:"등록/수정",onClick:g},{id:"delete",text:"삭제",onClick:f}],[g,f]);return e.jsxs("div",{className:"flex flex-col h-full bg-background p-6 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"건전성자료 감리의견"}),e.jsx(U,{actions:M})]}),e.jsxs("div",{className:"flex items-center gap-2 border-t pt-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"결산월:"}),e.jsxs(R,{value:C,onValueChange:v,children:[e.jsx(A,{className:"w-[120px]",children:e.jsx(I,{placeholder:"선택"})}),e.jsx(D,{children:j.length>0?j.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value)):e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"202401",children:"202401"}),e.jsx(i,{value:"202402",children:"202402"}),e.jsx(i,{value:"202403",children:"202403"})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 flex-grow",children:[e.jsx(y,{placeholder:"의견 또는 결과를 입력하세요",className:"resize-none h-32",value:a,onChange:s=>m(s.target.value)}),e.jsx("div",{className:"flex-grow rounded-md border overflow-hidden",children:e.jsxs(E,{children:[e.jsx(F,{className:"bg-muted/50 sticky top-0",children:e.jsxs(u,{children:[e.jsx(d,{className:"w-[50px] text-center p-0 border-r last:border-r-0",children:e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx(N,{checked:r.length>0&&o.length===r.length,onCheckedChange:O})})}),e.jsx(d,{className:"w-[60px] text-center border-r last:border-r-0",children:"순번"}),e.jsx(d,{className:"border-r last:border-r-0",children:"감리의견"}),e.jsx(d,{className:"w-[100px] text-center border-r last:border-r-0",children:"등록자"})]})}),e.jsx(H,{children:r.length>0?r.map((s,t)=>e.jsxs(u,{onDoubleClick:()=>w(s.opinion),className:"cursor-pointer hover:bg-muted/50",children:[e.jsx(l,{className:"text-center p-0 border-r last:border-r-0",children:e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx(N,{checked:o.includes(s.id),onCheckedChange:()=>T(s.id),onClick:p=>p.stopPropagation()})})}),e.jsx(l,{className:"text-center border-r last:border-r-0",children:t+1}),e.jsx(l,{className:"border-r last:border-r-0",children:s.opinion}),e.jsx(l,{className:"text-center border-r last:border-r-0",children:s.registrant})]},s.id)):e.jsx(u,{children:e.jsx(l,{colSpan:4,className:"text-center h-24 border-r last:border-r-0",children:"데이터가 없습니다."})})})]})})]})]})}function X(){return e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(z,{})})}export{X as default};
//# sourceMappingURL=page-CNvkKskK.js.map
