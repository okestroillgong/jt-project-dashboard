import{d as $,e as R,r as i,j as t,t as c,B as m}from"./index-2Av6MLFj.js";import{l as k}from"./popup-bus-D6rWwgNZ.js";import{T as I,B as P,a as O,b as u,c as p,d as B}from"./title-icon-nFIwsV-0.js";import{C as E,a as K,b as x,c as f}from"./CustomTabs-wPWvvwbx.js";import{R as Y}from"./RightActions-CUX54lWR.js";import{D}from"./DataTable-C4vt9fnC.js";import{F as S}from"./FilterContainer-Cxktb3TD.js";import"./index-DmPuGcMg.js";import"./Combination-Bip0-cB-.js";import"./table-jcuTC0ZX.js";import"./format-Bs4upCOt.js";import"./select-Duqj-Ize.js";import"./index-B6SAKWOZ.js";import"./checkbox-COTNJ_PZ.js";import"./textarea-SvLRbOEg.js";const F=Array.from({length:5},(o,a)=>({id:a+1,accountNumber:`ACC100${a}`,applicantName:`신청인${a}`,accountStatus:a%2===0?"정상":"연체",productName:"희망론",loanStartDate:"20230115",loanEndDate:"20280114",loanAmount:25e6*(a+1),customerNumber:`CUST200${a}`,debtorName:`채무자${a}`,residentRegistrationNumber:`900101-123456${a}`})),M=[{accessorKey:"id",header:"순번"},{accessorKey:"accountNumber",header:"계좌번호"},{accessorKey:"applicantName",header:"신청인명"},{accessorKey:"accountStatus",header:"계좌상태"},{accessorKey:"productName",header:"상품명"},{accessorKey:"loanStartDate",header:"대출신규일자"},{accessorKey:"loanEndDate",header:"대출만기일자"},{accessorKey:"loanAmount",header:"대출금액"}],H=[{accessorKey:"installmentNumber",header:"납입회차"},{accessorKey:"paymentAmount",header:"납입금액"},{accessorKey:"actualPaymentAmount",header:"실제납입금액"},{accessorKey:"startDate",header:"기산일자"}],L=[{type:"grid",columns:3,filters:[{name:"targetCustomerNumber",type:"text",label:"대상자고객번호",readonly:!0},{name:"accountNumberSearch",type:"text",label:"계좌번호",readonly:!0},{name:"bondAdjustmentType",type:"select",label:"채권조정구분",options:[{value:"personal-rehabilitation",label:"개인회생"}],defaultValue:"personal-rehabilitation",readonly:!0}]}];function oe(){var h,g;const o=$(),{currentState:a,updateFilters:s,updateTableData:d,clearState:j}=R(),[b,w]=i.useState("ledger-info");i.useEffect(()=>k(n=>{if(n.targetTabId===o&&n.source==="customer-search"){const r=n.payload;r.sourceFilter==="applicantName"?s(o,{customerNumber:r.centralCustomerNumber,residentRegistrationNumber:r.realNameNumber,accountNumber:r.accountNumber,applicantName:r.customerName}):s(o,{customerNumber:r.centralCustomerNumber})}}),[o,s]);const C=i.useMemo(()=>[{type:"grid",columns:4,filters:[{name:"customerNumber",type:"long-search",label:"고객번호",onButtonClick:(e,n)=>{n==null||n.preventDefault();const r=e||"";window.open(`/popup/customer-search?customerNumber=${r}&openerTabId=${o}`,"CustomerSearch","width=1600,height=800")}},{name:"debtorName",type:"text",label:"채무자명",readonly:!0},{name:"applicantName",type:"long-search",label:"신청자명",readonly:!0,onButtonClick:(e,n)=>{n==null||n.preventDefault();const r=e||"";window.open(`/popup/customer-search?customerName=${r}&openerTabId=${o}&sourceFilter=applicantName`,"CustomerSearch","width=1600,height=800")}},{name:"residentRegistrationNumber",type:"text",label:"주민등록번호",readonly:!0},{name:"accountNumber",type:"text",label:"계좌번호",readonly:!0},{name:"virtualAccount",type:"text",label:"가상계좌",readonly:!0},{name:"loanBalance",type:"number",label:"대출잔액",readonly:!0},{name:"provisionalPayment",type:"number",label:"가지급금"},{name:"jurisdictionCourt",type:"select",label:"관할법원",options:[]},{name:"caseNumber",type:"text",label:"사건번호"},{name:"progressStatus",type:"select",label:"진행상태",options:[]},{name:"serviceDate",type:"date",label:"송달일자"},{name:"receiptDate",type:"date",label:"접수일자"},{name:"prohibitionOrderDate",type:"date",label:"금지명령일자"},{name:"suspensionOrderDate",type:"date",label:"중지명령일자"},{name:"commencementDate",type:"date",label:"개시일자"},{name:"dismissalDate",type:"date",label:"기각일자"},{name:"withdrawalDate",type:"date",label:"취하일자"},{name:"abolitionDate",type:"date",label:"폐지일자"},{name:"authorizationDate",type:"date",label:"인가일자"},{name:"reportedPrincipal",type:"number",label:"신고원금"},{name:"reportedAmount",type:"number",label:"신고금액"},{name:"confirmedAmount",type:"number",label:"확정금액"},{name:"reportExclusionDate",type:"date",label:"보고제외처리일자"},{name:"repaymentSum",type:"number",label:"변제금합계"},{name:"difference",type:"number",label:"차액"},{name:"bondNumber",type:"text",label:"채권번호"},{name:"successionStatus",type:"select",label:"승계여부",options:[]},{name:"totalPaymentInstallments",type:"number",label:"총납입회차"},{name:"repaymentStartDate",type:"date",label:"변제시작일",popoverSide:"top"},{name:"repaymentEndDate",type:"date",label:"변제종료일자",popoverSide:"top"},{name:"accountReportStatus",type:"select",label:"계좌신고서유무",options:[]},{name:"selfEmployedStatus",type:"select",label:"자영업자유무",options:[]},{name:"workplace",type:"text",label:"근무처"},{name:"monthlyAverageIncome",type:"number",label:"월평균소득"},{name:"judicialDepartment",type:"text",label:"재판부",readonly:!0},{name:"paymentRate",type:"number",label:"납입율"},{name:"cumulativeRepayment",type:"number",label:"변제누계"},{name:"repaymentRatio",type:"number",label:"변제비율"},{name:"priorityRepaymentInstallment",type:"number",label:"우선변제회차"},{name:"specialNotes",type:"text",label:"특이사항",colSpan:3},{name:"objection",type:"checkbox",label:"이의신청"},{name:"unprocessedAmount",type:"input-button",label:"미처리금액",buttonText:"처리",onButtonClick:e=>{const N=window.screen.width/2-500,l=window.screen.height/2-800/2,T=e?`?unprocessedAmount=${e}`:"";window.open(`/popup/unprocessed-amount-processing${T}`,"UnprocessedAmountProcessing",`width=1000,height=800,top=${l},left=${N}`)}},{name:"finalProcessingDate",type:"date",label:"최종처리일자",readonly:!0},{name:"confirmationStatus",type:"select",label:"확정여부",options:[]}]}],[o]),y=i.useCallback((e,n)=>{s(o,{[e]:n})},[o,s]),v=e=>{const n={customerNumber:e.customerNumber,debtorName:e.debtorName,applicantName:e.applicantName,residentRegistrationNumber:e.residentRegistrationNumber,accountNumber:e.accountNumber,virtualAccount:`V-ACC-${e.accountNumber.slice(-4)}`,loanBalance:e.loanAmount,provisionalPayment:12e4,jurisdictionCourt:"서울회생법원",caseNumber:`2023개회${Math.floor(Math.random()*9e4)+1e4}`,progressStatus:"인가",serviceDate:new Date().toISOString(),receiptDate:new Date("2023-01-10").toISOString(),prohibitionOrderDate:new Date("2023-01-15").toISOString(),suspensionOrderDate:new Date("2023-01-20").toISOString(),commencementDate:new Date("2023-02-01").toISOString(),dismissalDate:null,withdrawalDate:null,abolitionDate:null,authorizationDate:new Date("2023-08-01").toISOString(),reportedPrincipal:e.loanAmount,reportedAmount:e.loanAmount+5e5,confirmedAmount:e.loanAmount+45e4,reportExclusionDate:null,repaymentSum:15e6,difference:e.loanAmount+45e4-15e6,bondNumber:`BOND-${e.accountNumber.slice(-6)}`,successionStatus:"아니오",totalPaymentInstallments:60,repaymentStartDate:new Date("2023-09-01").toISOString(),repaymentEndDate:new Date("2028-08-31").toISOString(),accountReportStatus:"유",selfEmployedStatus:"아니오",workplace:"(주)가나다라",monthlyAverageIncome:35e5,judicialDepartment:"제3파산부",paymentRate:80,cumulativeRepayment:12e6,repaymentRatio:40,priorityRepaymentInstallment:3,specialNotes:"특별한 사항 없음.",objection:!0,unprocessedAmount:15e4,finalProcessingDate:new Date().toISOString(),confirmationStatus:"예"};s(o,n);const r=Array.from({length:12},(N,l)=>({installmentNumber:l+1,paymentAmount:55e4,actualPaymentAmount:55e4,startDate:`2023-${String(l+1).padStart(2,"0")}-25`}));d(o,"paymentHistoryTable",r)},A=()=>{console.log("Search button clicked. Fetching data..."),d(o,"personalRehabilitationTable",F)};return a?t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:I,alt:"타이틀 아이콘",width:40,height:40}),t.jsx("h2",{className:"text-lg font-semibold",children:"개인회생관리"})]}),t.jsx(P,{children:t.jsxs(O,{children:[t.jsx(u,{children:"홈"}),t.jsx(p,{}),t.jsx(u,{children:"여신사후"}),t.jsx(p,{}),t.jsx(u,{children:"채권조정"}),t.jsx(p,{}),t.jsx(u,{children:t.jsx(B,{children:"개인회생관리"})})]})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(Y,{actions:[{id:"searchDoc",onClick:()=>{const e=a==null?void 0:a.filters.customerNumber,n=typeof e=="object"&&e!==null?e.code:e;console.log("[PersonalRehabilitation] Opening DocumentSearch popup with customerNumber:",n),n?window.open(`/popup/document-search?customerNumber=${n}&openerTabId=${o}`,"DocumentSearch","width=1600,height=800"):c.warning("조회된 고객이 없습니다.",{description:"먼저 조회결과 테이블에서 행을 선택하거나 원장정보에 고객번호를 입력해 주십시오.",duration:3e3})}},{id:"scan",onClick:()=>{const e=a.filters.customerNumber;e?window.open(`/popup/document-scan?customerNumber=${e}`,"DocumentScan","width=1600,height=800"):c.warning("조회된 고객이 없습니다.",{description:"먼저 조회결과 테이블에서 행을 선택하여 원장정보를 조회해 주십시오.",duration:3e3})}},{id:"new"},{id:"register"},{id:"search",onClick:A},{id:"data-reset",onClick:()=>j(o)},{id:"reset"}]})}),t.jsx(S,{filterLayout:L,values:a.filters,onChange:y}),t.jsx(D,{title:"조회결과",columns:M,data:((h=a.tables)==null?void 0:h.personalRehabilitationTable)||[],amountColumns:["loanAmount"],dateColumnConfig:{loanStartDate:"YYYYMMDD",loanEndDate:"YYYYMMDD"},onRowClick:v}),t.jsxs(E,{defaultValue:"ledger-info",value:b,onValueChange:w,children:[t.jsxs(K,{rightContent:b==="payment-history"&&t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(m,{variant:"secondary",className:"h-[35px] w-28 cursor-pointer rounded-[18px] bg-[#e5e5e5] text-black hover:bg-gray-300",children:"행추가"}),t.jsx(m,{variant:"secondary",className:"h-[35px] w-28 cursor-pointer rounded-[18px] bg-[#e5e5e5] text-black hover:bg-gray-300",onClick:()=>{const{accountNumber:e,customerNumber:n}=(a==null?void 0:a.filters)||{};e?window.open(`/popup/modification-history?customerNumber=${n||""}&accountNumber=${e}&openerTabId=${o}`,"ModificationHistory","width=1600,height=800"):c.warning("조회된 계좌가 없습니다.",{description:"먼저 조회결과 테이블에서 행을 선택하여 주십시오.",duration:3e3})},children:"수정내역"}),t.jsx(m,{variant:"secondary",className:"h-[35px] w-28 cursor-pointer rounded-[18px] bg-[#e5e5e5] text-black hover:bg-gray-300",children:"상세조회"}),t.jsx(m,{variant:"secondary",className:"h-[35px] w-28 cursor-pointer rounded-[18px] bg-[#e5e5e5] text-black hover:bg-gray-300",onClick:()=>{const e=a.filters.accountNumber;e?window.open(`/popup/transaction-history?accountNumber=${e}`,"TransactionHistory","width=1600,height=800"):c.warning("조회된 계좌가 없습니다.",{description:"먼저 조회결과 테이블에서 행을 선택하여 주십시오.",duration:3e3})},children:"거래내역"})]}),children:[t.jsx(x,{value:"ledger-info",children:"개인회생 원장정보"}),t.jsx(x,{value:"payment-history",children:"납입내역"})]}),t.jsx(f,{value:"ledger-info",children:t.jsx(S,{filterLayout:C,values:a.filters,onChange:y})}),t.jsx(f,{value:"payment-history",className:"space-y-4",children:t.jsx(D,{columns:H,data:((g=a.tables)==null?void 0:g.paymentHistoryTable)||[],amountColumns:["paymentAmount","actualPaymentAmount"],dateColumnConfig:{startDate:"YYYYMMDD"}})})]})]}):null}export{oe as default};
//# sourceMappingURL=page-THdJlPFh.js.map
