{"version":3,"file":"page-BPwk-pdH.js","sources":["../../src/pages/dashboard/after-loan/special-bond/manager-inquiry/page.tsx"],"sourcesContent":["\n\nimport { usePathname } from \"@/lib/hooks/useAppLocation\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { usePageStore } from \"@/lib/store/pageStore\";\nimport { listenForPopupMessages } from \"@/lib/popup-bus\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbList,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n} from \"@/components/ui/breadcrumb\";\nimport { CustomTabs as Tabs, CustomTabsContent as TabsContent, CustomTabsList as TabsList, CustomTabsTrigger as TabsTrigger } from \"@/components/app/CustomTabs\";\nimport { RightActions, ActionType } from \"@/components/app/RightActions\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport type { FilterLayout } from \"@/components/filters/types\";\nimport { FilterContainer } from \"@/components/filters/FilterContainer\";\nimport TitleIcon from \"@/assets/icons/webp/title-icon.webp\";\nimport { ColumnDef } from \"@tanstack/react-table\";\n\n// 1. Type Definitions\ntype AssignedManagerItem = {\n  id: number;\n  managerId: string;\n  managerName: string;\n  count: number;\n  startDate: string;\n  accountNo: string;\n  customerName: string;\n  historyStartDate: string;\n  historyEndDate: string;\n  historyManagerId: string;\n  historyManagerName: string;\n};\n\ntype UnassignedManagerItem = {\n  id: number;\n  accountNo: string;\n  customerNo: string;\n  customerName: string;\n  productName: string;\n};\n\n// 2. Column Definitions\n\n// 2.1 Assigned Tab (Simplified)\nconst createColumn = (accessorKey: string, header: string): ColumnDef<AssignedManagerItem> => ({\n  accessorKey,\n  header,\n});\n\nconst assignedColumns: ColumnDef<AssignedManagerItem>[] = [\n  createColumn(\"managerId\", \"담당자 사번\"),\n  createColumn(\"managerName\", \"담당자명\"),\n  createColumn(\"count\", \"건수\"),\n  createColumn(\"startDate\", \"담당 시작일\"),\n  createColumn(\"accountNo\", \"계좌번호\"),\n  createColumn(\"customerName\", \"고객명\"),\n  createColumn(\"historyStartDate\", \"담당 시작일\"),\n  createColumn(\"historyEndDate\", \"담당 종료일\"),\n  createColumn(\"historyManagerId\", \"담당자 사번\"),\n  createColumn(\"historyManagerName\", \"담당자명\"),\n];\n\n// 2.2 Unassigned Tab (No Checkbox)\nconst createUnassignedColumn = (accessorKey: string, header: string): ColumnDef<UnassignedManagerItem> => ({\n  accessorKey,\n  header,\n});\n\nconst unassignedColumns: ColumnDef<UnassignedManagerItem>[] = [\n  createUnassignedColumn(\"accountNo\", \"계좌번호\"),\n  createUnassignedColumn(\"customerNo\", \"고객번호\"),\n  createUnassignedColumn(\"customerName\", \"고객명\"),\n];\n\n// 3. Mock Data\nconst mockAssignedData: AssignedManagerItem[] = Array.from({ length: 5 }, (_, i) => ({\n  id: i + 1,\n  managerId: `M${1000 + i}`,\n  managerName: `담당자${i + 1}`,\n  count: 1,\n  startDate: \"2024-01-01\",\n  accountNo: `123-45-6789${i}`,\n  customerName: `고객${i + 1}`,\n  historyStartDate: \"2023-01-01\",\n  historyEndDate: \"2023-12-31\",\n  historyManagerId: `M${2000 + i}`,\n  historyManagerName: `이전담당${i + 1}`,\n}));\n\nconst mockUnassignedData: UnassignedManagerItem[] = Array.from({ length: 5 }, (_, i) => ({\n  id: i + 1,\n  accountNo: `987-65-4321${i}`,\n  customerNo: `CUST${5000 + i}`,\n  customerName: `미배정고객${i + 1}`,\n  productName: \"신용대출\",\n}));\n\nexport default function SpecialBondManagerInquiryPage() {\n  const tabId = usePathname();\n  const { currentState, updateFilters, updateTableData, clearState } = usePageStore();\n  const [activeTab, setActiveTab] = useState(\"assigned\");\n\n  // Popup Message Listener\n  useEffect(() => {\n    const cleanup = listenForPopupMessages((message) => {\n      if (message.targetTabId !== tabId) return;\n\n      if (message.source === \"user-search\") { \n        const user = message.payload;\n        updateFilters(tabId, { \n            unassignedManagerCode: { code: user.userId, name: user.userName },\n            unassignedManagerName: user.userName\n        });\n      }\n    });\n    return cleanup;\n  }, [tabId, activeTab, updateFilters]);\n\n  const handleFilterChange = useCallback(\n    (name: string, value: any) => {\n      updateFilters(tabId, { [name]: value });\n    },\n    [tabId, updateFilters]\n  );\n\n  const handleSearch = () => {\n    console.log(\"Searching...\");\n    if (activeTab === 'assigned') {\n        updateTableData(tabId, 'assignedTable', mockAssignedData);\n    } else {\n        updateTableData(tabId, 'unassignedTable', mockUnassignedData);\n    }\n  };\n\n  const handleReset = () => {\n    clearState(tabId);\n  };\n\n  const handleRegister = () => {\n    console.log(\"Registering assignment...\");\n  };\n\n  // Filter Layouts\n  const unassignedFilterLayout: FilterLayout = [\n    {\n      type: \"grid\",\n      columns: 3,\n      filters: [\n        { \n            name: \"unassignedManagerCode\", \n            type: \"search\", \n            label: \"담당자 코드\",\n            onButtonClick: (val, e) => {\n                e?.preventDefault();\n                window.open(`/popup/user-search?openerTabId=${tabId}`, \"UserSearch\", \"width=1600,height=800\");\n            }\n        },\n        { name: \"unassignedManagerName\", type: \"text\", label: \"담당자명\", readonly: true },\n        { name: \"unassignedStartDate\", type: \"date\", label: \"담당시작일\" },\n      ],\n    },\n  ];\n\n  const rightActions = activeTab === 'assigned'\n    ? [] // No actions for assigned tab\n    : [\n        { id: 'register' as ActionType, onClick: handleRegister },\n        { id: 'reset' as ActionType, onClick: handleReset }\n      ];\n\n  if (!currentState) return null;\n\n  const assignedRowCount = currentState.tables?.['assignedTable']?.length || 0;\n  const unassignedRowCount = currentState.tables?.['unassignedTable']?.length || 0;\n\n  return (\n    <div className=\"flex flex-col gap-6 pb-10\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <img src={TitleIcon} alt=\"타이틀 아이콘\" width={40} height={40} />\n          <h2 className=\"text-lg font-semibold\">특수채권 담당자조회</h2>\n        </div>\n        <Breadcrumb>\n          <BreadcrumbList>\n            <BreadcrumbItem>홈</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>여신사후</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>특수채권</BreadcrumbItem>\n            <BreadcrumbSeparator />\n            <BreadcrumbItem>\n              <BreadcrumbPage>특수채권 담당자조회</BreadcrumbPage>\n            </BreadcrumbItem>\n          </BreadcrumbList>\n        </Breadcrumb>\n      </div>\n\n      {/* Right Actions */}\n      <div className=\"flex justify-end min-h-[35px]\">\n        <RightActions actions={rightActions} />\n      </div>\n\n      {/* Tabs Area */}\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList>\n          <TabsTrigger value=\"assigned\">배정</TabsTrigger>\n          <TabsTrigger value=\"unassigned\">미배정</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"assigned\" className=\"flex flex-col gap-4 mt-0\">\n            {/* Result Summary Layout (Mimicking Filter Container) */}\n            <div className=\"flex justify-between items-center px-6 py-8 bg-[#f5f6f9] text-sm border-gray-200 border-1 rounded-lg\">\n            <div className=\"flex justify-between items-center gap-12\">\n                <div className=\"font-medium\">담당자 정보: </div>\n                  <div>\n                    <span className=\"text-[#3da072]\">총 1</span>건\n                  </div>\n                </div>\n\n                <div className=\"flex justify-between items-center gap-12\">\n                  <div className=\"font-medium\">담당 계좌정보: </div>\n                  <div>\n                    <span className=\"text-[#3da072]\">총 1</span>건\n                  </div>\n                </div>\n\n                <div className=\"flex justify-between items-center gap-12\">\n                  <div className=\"font-medium\">계좌 이력정보: </div>\n                  <div>\n                    <span className=\"text-[#3da072]\">총 3</span>건\n                  </div>\n                </div>\n            </div>\n            \n            <DataTable \n                columns={assignedColumns}\n                data={currentState.tables?.['assignedTable'] || []}\n            />\n        </TabsContent>\n\n        <TabsContent value=\"unassigned\" className=\"flex flex-col gap-4 mt-0\">\n            <FilterContainer \n                filterLayout={unassignedFilterLayout}\n                values={currentState.filters}\n                onChange={handleFilterChange}\n            />\n            \n            <DataTable \n                title=\"담당 미배정 계좌정보\"\n                columns={unassignedColumns}\n                data={currentState.tables?.['unassignedTable'] || []}\n            />\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}"],"names":["createColumn","accessorKey","header","assignedColumns","createUnassignedColumn","unassignedColumns","_","i","SpecialBondManagerInquiryPage","tabId","usePathname","currentState","updateFilters","updateTableData","clearState","usePageStore","activeTab","setActiveTab","useState","useEffect","listenForPopupMessages","message","user","handleFilterChange","useCallback","name","value","handleReset","handleRegister","unassignedFilterLayout","val","e","rightActions","_b","_a","_d","_c","jsxs","jsx","TitleIcon","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbSeparator","BreadcrumbPage","RightActions","Tabs","TabsList","TabsTrigger","TabsContent","DataTable","_e","FilterContainer","_f"],"mappings":"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"}