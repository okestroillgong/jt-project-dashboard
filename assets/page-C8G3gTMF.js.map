{"version":3,"file":"page-C8G3gTMF.js","sources":["../../src/pages/popup/customer-management-code/page.tsx"],"sourcesContent":["\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { DataTable } from \"@/components/app/DataTable\";\nimport { FilterContainer } from \"@/components/filters/FilterContainer\";\nimport type { FilterLayout } from \"@/components/filters/types\";\nimport { ColumnDef } from \"@tanstack/react-table\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { PopupRightActions, PopupAction } from \"@/components/app/PopupRightActions\";\n\n// --- Data Structures for Checkbox Matrix ---\nconst codeCategories = [\n  { title: \"고객\", items: [\"약속파기\", \"계약서미비\", \"연락처 無\", \"휴대폰 명의 변경\", \"착신정지\", \"채무부존재\", \"민원주의(대외민원)\", \"약속\", \"상환불능\", \"구치소수감\", \"3자 동의\", \"변제 순서 변경\", \"변제 순서 재변경\"] },\n  { title: \"심사\", items: [\"예외) 대부업 채무건수 과다\", \"감액승인\", \"정밀승인\", \"타행대환 조건(증명서첨부)\", \"fb 관리부서 정밀심사건\", \"사기의심 판단\", \"APP즉시대출 금지\", \"재대출,추가대출 금지\", \"상위결재자 관리지시\", \"고객희망감액\", \"금리인하-고객요구\", \"금리인하-중도방어\", \"익일 재승인건\"] },\n  { title: \"금지\", items: [\"DM 금지\", \"전화금지\", \"자택전화금지\", \"회사전화금지\", \"E-mail 금지\", \"특수민원\", \"성향불량\", \"SMS금지\", \"방문금지\", \"사전안내 금지\"] },\n  { title: \"채무조정\", items: [\"프리워크아웃 신청\", \"프리워크아웃 실효\", \"개인회생 중지\", \"원금감면일시 상환\", \"원금감면분할 상환\", \"원금감면분할 상환 실\", \"원금감면분할 상환 품\", \"추심연락유예\", \"추심연락제한신청\", \"당행대환접수\", \"당행대환완료\", \"당행대환거부\"] },\n  { title: \"법조치\", items: [\"압류및추심/종결\", \"경매/진행\", \"경매/결정\", \"경매/종결\", \"공매/진행\", \"공매/결정\", \"공매/종결\", \"명의대여\", \"사기\", \"형사상개입\", \"사적개입\", \"공적개입\"] },\n  { title: \"PR\", items: [\"PR가능\", \"마케팅동의서 無\", \"소득증빙 불가\", \"대출금지\", \"채무과다\"] },\n  { title: \"제증명서\", items: [\"부채잔액증명서(개인회생)\", \"부채잔액증명서(신용회복)\", \"부채잔액증명서(파산/면책)\", \"대출완납증명서\"] },\n  { title: \"기타\", items: [\"국민행복기금금지\", \"국민행복기금접수\", \"타사법적조치\", \"당사법적조치\", \"생활보호\", \"대위변제(완납)\", \"대위변제(진행)\", \"채무부인\", \"JTSB매각대상\", \"JTSB양도보류동의\", \"JTSB주소보정완료\", \"새출발기금\"] },\n  { title: \"취급제한\", items: [\"매각\", \"상각\", \"비적격\", \"외부채무조정\", \"명의\", \"소송\", \"기타\"] },\n];\n\ntype ManagementCodeData = {\n    customer: string;\n    review: string;\n    ban: string;\n    debtAdjustment: string;\n    legalAction: string;\n    pr: string;\n    certificate: string;\n    etc: string;\n    restriction: string;\n}\n\n// Mock data\nconst mockManagementCodeData: ManagementCodeData[] = [{\n    customer: \"약속파기\",\n    review: \"감액승인\",\n    ban: \"DM 금지\",\n    debtAdjustment: \"개인회생 인가, 파산/면책 취소\",\n    legalAction: \"압류및추심/종결\",\n    pr: \"PR가능\",\n    certificate: \"부채잔액증명서(개인회생)\",\n    etc: \"국민행복기금금지\",\n    restriction: \"매각\",\n}];\n\n// Columns\nconst managementCodeColumns: ColumnDef<ManagementCodeData>[] = [\n    { accessorKey: \"customer\", header: \"고객\" },\n    { accessorKey: \"review\", header: \"심사\" },\n    { accessorKey: \"ban\", header: \"금지\" },\n    { accessorKey: \"debtAdjustment\", header: \"채무조정\" },\n    { accessorKey: \"legalAction\", header: \"법조치\" },\n    { accessorKey: \"pr\", header: \"PR\" },\n    { accessorKey: \"certificate\", header: \"제증명서\" },\n    { accessorKey: \"etc\", header: \"기타\" },\n    { accessorKey: \"restriction\", header: \"취급제한\" },\n];\n\n// Data type for the history table\ntype HistoryData = {\n  id: number;\n  status: string;\n  category: string;\n  detail: string;\n  registrationReason: string;\n  registrant: string;\n  registrationDateTime: string;\n  deregistrationReason: string;\n  deregistrant: string;\n  deregistrationDateTime: string;\n};\n\n\nexport default function CustomerManagementCodePopup() {\n    const [checkedItems, setCheckedItems] = useState<Record<string, boolean>>({});\n    const [filters, setFilters] = useState<Record<string, any>>({\n        registrationReason: \"\",\n        deregistrationReason: \"\",\n    });\n\n    const handleFilterChange = useCallback((name: string, value: any) => {\n        setFilters(prev => ({ ...prev, [name]: value }));\n    }, []);\n\n    const registrationReasonLayout: FilterLayout = useMemo(() => [\n        {\n            type: \"grid\",\n            columns: 1,\n            filters: [\n                { name: \"registrationReason\", type: \"text\", label: \"등록사유 및 근거\", placeholder: \"등록 사유 및 근거를 입력하세요.\" },\n                { name: \"deregistrationReason\", type: \"text\", label: \"해지사유 및 근거\", placeholder: \"해지 사유 및 근거를 입력하세요.\" },\n            ],\n        },\n    ], []);\n\n    // Mock data for the history table\n    const mockHistoryData: HistoryData[] = useMemo(() => [\n        { id: 3, status: \"등록\", category: \"채무조정코드\", detail: \"개인회생 인가\", registrationReason: \"제주지방법원 2013개회10998 인가\", registrant: \"등록자A\", registrationDateTime: \"2025-11-06 18:42\", deregistrationReason: \"\", deregistrant: \"\", deregistrationDateTime: \"\" },\n        { id: 2, status: \"등록\", category: \"채무조정코드\", detail: \"파산/면책 취소\", registrationReason: \"서울회생법원 하단 : 하단 하단 : 20251105 기각\", registrant: \"등록자B\", registrationDateTime: \"2025-11-05 13:47\", deregistrationReason: \"서울회생법원 하단 : 하단 하단 : 20251105 기각\", deregistrant: \"해제자A\", deregistrationDateTime: \"2025-11-05 13:47:21\" },\n        { id: 1, status: \"해제\", category: \"채무조정코드\", detail: \"파산면책 접수\", registrationReason: \"서울회생법원 하단 : 하단 하단 : 20251105 접수\", registrant: \"등록자C\", registrationDateTime: \"2025-11-05 13:42\", deregistrationReason: \"\", deregistrant: \"\", deregistrationDateTime: \"\" },\n    ], []);\n\n    // History table columns\n    const historyColumns: ColumnDef<HistoryData>[] = useMemo(() => [\n        { accessorKey: \"id\", header: \"순번\" },\n        { accessorKey: \"status\", header: \"상태\" },\n        { accessorKey: \"category\", header: \"구분\" },\n        { accessorKey: \"detail\", header: \"세부사항\" },\n        { accessorKey: \"registrationReason\", header: \"등록사유\" },\n        { accessorKey: \"registrant\", header: \"등록처리자\" },\n        { accessorKey: \"registrationDateTime\", header: \"등록일시\" },\n        { accessorKey: \"deregistrationReason\", header: \"해제사유\" },\n        { accessorKey: \"deregistrant\", header: \"해제처리자\" },\n        { accessorKey: \"deregistrationDateTime\", header: \"해제일시\" },\n    ], []);\n\n    const handleCheckboxChange = (item: string) => {\n        setCheckedItems(prev => ({ ...prev, [item]: !prev[item] }));\n    };\n\n    const handleSelectAllInCategory = (categoryTitle: string, checked: boolean) => {\n        const category = codeCategories.find(c => c.title === categoryTitle);\n        if (!category) return;\n\n        const newCheckedItems = { ...checkedItems };\n        category.items.forEach(item => {\n            newCheckedItems[item] = checked;\n        });\n        setCheckedItems(newCheckedItems);\n    };\n\n    return (\n        <div className=\"flex flex-col h-screen bg-gray-50 text-sm\">\n            <div className=\"flex justify-between items-center p-4 bg-white border-b shrink-0\">\n                <h1 className=\"text-xl font-bold\">고객관리코드</h1>\n                <PopupRightActions actions={[{ id: \"close\", text: \"닫기\", onClick: () => window.close() }]} />\n            </div>\n\n            <div className=\"flex-1 overflow-auto p-4 flex flex-col gap-4\">\n                \n                {/* Top Table Section */}\n                <div>\n                    <DataTable \n                        title=\"고객관리코드\"\n                        columns={managementCodeColumns}\n                        data={mockManagementCodeData}\n                        hidePagination\n                    />\n                </div>\n\n                {/* Checkbox Matrix Section */}\n                <div className=\"flex flex-col gap-2\">\n                    <div className=\"flex justify-between items-end\">\n                        <h3 className=\"font-semibold\">고객관리코드</h3>\n                        <div className=\"flex items-center gap-2\">\n                        <Button variant=\"secondary\" className=\"h-[35px] w-24 cursor-pointer rounded-2xl\">등록해지</Button>\n                        <Button variant=\"secondary\" className=\"h-[35px] w-24 cursor-pointer rounded-2xl\">저장</Button>\n                        </div>\n                    </div>\n                    <div className=\"border rounded-md bg-white\">\n                        {/* Header Row */}\n                        <div className=\"flex bg-gray-100 border-b\">\n                            {codeCategories.map(cat => {\n                                const allInCategoryChecked = cat.items.every(item => !!checkedItems[item]);\n                                const someInCategoryChecked = cat.items.some(item => !!checkedItems[item]);\n\n                                return (\n                                    <div key={cat.title} className=\"flex-1 p-2 text-left font-bold border-r last:border-r-0 flex items-center gap-2\">\n                                        <Checkbox\n                                            id={`select-all-${cat.title}`}\n                                            checked={allInCategoryChecked}\n                                            onCheckedChange={(checked) => handleSelectAllInCategory(cat.title, !!checked)}\n                                        />\n                                        <Label htmlFor={`select-all-${cat.title}`} className=\"cursor-pointer\">{cat.title}</Label>\n                                    </div>\n                                )\n                            })}\n                        </div>\n                        {/* Checkbox List Area */}\n                        <div className=\"flex h-64\">\n                            {codeCategories.map(cat => (\n                                <div key={cat.title} className=\"flex-1 p-2 border-r last:border-r-0 overflow-y-auto custom-scrollbar\">\n                                    <ul className=\"flex flex-col gap-2\">\n                                        {cat.items.map(item => (\n                                            <li key={item} className=\"flex items-center gap-2\">\n                                                <Checkbox\n                                                    id={`${cat.title}-${item}`}\n                                                    checked={!!checkedItems[item]}\n                                                    onCheckedChange={() => handleCheckboxChange(item)}\n                                                />\n                                                <Label htmlFor={`${cat.title}-${item}`} className=\"font-normal cursor-pointer\">{item}</Label>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Reason Input Section */}\n                <div className=\"flex flex-col gap-4\">\n                    <FilterContainer\n                        filterLayout={registrationReasonLayout}\n                        values={filters}\n                        onChange={handleFilterChange}\n                    />\n                </div>\n\n                {/* History Table Section */}\n                <div className=\"flex-grow\">\n                    <DataTable \n                        title=\"고객관리코드 이력\"\n                        columns={historyColumns} \n                        data={mockHistoryData}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":["codeCategories","mockManagementCodeData","managementCodeColumns","CustomerManagementCodePopup","checkedItems","setCheckedItems","useState","filters","setFilters","handleFilterChange","useCallback","name","value","prev","registrationReasonLayout","useMemo","mockHistoryData","historyColumns","handleCheckboxChange","item","handleSelectAllInCategory","categoryTitle","checked","category","c","newCheckedItems","jsxs","jsx","PopupRightActions","DataTable","Button","cat","allInCategoryChecked","Checkbox","Label","FilterContainer"],"mappings":"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"}