import{d as O,e as H,r as c,j as o}from"./index-u5m4l9UG.js";import{l as F}from"./popup-bus-D6rWwgNZ.js";import{T as v,B as D,a as R,b as u,c as d,d as L}from"./title-icon-0QYw6STC.js";import{C as Q,a as U,b as C,c as j}from"./CustomTabs-CFzKm4Tv.js";import{L as W}from"./LeftActions-Cb6q1J46.js";import{R as E}from"./RightActions-6AZ-6HAI.js";import{D as _}from"./DataTable-CuXBXv1d.js";import{F as V}from"./FilterContainer-Aoqyav-7.js";import{F as G}from"./FilterFileUpload-Csc8pPF7.js";import"./index-Qa0YjGk7.js";import"./Combination-DqnN4WXn.js";import"./table-u1qDuHlO.js";import"./format-Bs4upCOt.js";import"./select-CUHv8fEa.js";import"./index-DXJMQJtd.js";import"./checkbox-DnKtZFHZ.js";import"./textarea-CIbYvi8i.js";const J=Array.from({length:12},(t,s)=>({id:s+1,soundnessMonth:"2024-10",subjectName:"일반자금대출",customerName:`고객${s+1}`,customerNumber:`CUST${1001+s}`,accountNumber:`ACC${2001+s}`,loanAmount:15e6*(s+1)})),z=Array.from({length:8},(t,s)=>({id:s+1,soundnessMonth:"2024-09",subjectName:"시설자금대출",customerName:`이력고객${s+1}`,customerNumber:`HIST${1001+s}`,accountNumber:`HIST_ACC${2001+s}`,loanAmount:2e7*(s+1),loanBalance:18e6*(s+1),loanBySubject:5e6*(s+1)})),X=[{accessorKey:"id",header:"순번"},{accessorKey:"soundnessMonth",header:"건전성년월"},{accessorKey:"subjectName",header:"과목명"},{accessorKey:"customerName",header:"고객명"},{accessorKey:"customerNumber",header:"고객번호"},{accessorKey:"accountNumber",header:"계좌번호"},{accessorKey:"loanAmount",header:"대출금액"}],Y=[{accessorKey:"id",header:"순번"},{accessorKey:"soundnessMonth",header:"건전성년월"},{accessorKey:"subjectName",header:"과목명"},{accessorKey:"customerName",header:"고객명"},{accessorKey:"customerNumber",header:"고객번호"},{accessorKey:"accountNumber",header:"계좌번호"},{accessorKey:"loanAmount",header:"대출금액"},{accessorKey:"loanBalance",header:"대출잔액"},{accessorKey:"loanBySubject",header:"과목별대출금"}],w=[{value:"2024-01",label:"2024-01"},{value:"2024-02",label:"2024-02"},{value:"2024-03",label:"2024-03"},{value:"2024-04",label:"2024-04"},{value:"2024-05",label:"2024-05"},{value:"2024-06",label:"2024-06"},{value:"2024-07",label:"2024-07"},{value:"2024-08",label:"2024-08"},{value:"2024-09",label:"2024-09"},{value:"2024-10",label:"2024-10"},{value:"2024-11",label:"2024-11"},{value:"2024-12",label:"2024-12"}];function ge(){var N;const t=O(),{currentState:s,updateFilters:i,updateTableData:h,clearState:Z}=H(),[l,T]=c.useState("inquiry"),[b,ee]=c.useState("Q0001"),[y,f]=c.useState("inquiry");c.useEffect(()=>F(e=>{if(e.targetTabId===t){if(e.source==="customer-search"){const a=e.payload;i(t,{customerNumber:a.centralCustomerNumber,accountNumber:a.accountNumber})}else if(e.source==="branch-management"){const a=e.payload;i(t,{managementBranch:{code:a.branchCode,name:a.branchName}})}else if(e.source==="user-search"){const a=e.payload;i(t,{modifierEmployeeId:{code:a.usrno,name:a.usrNm}})}}}),[t,i]);const $=[{type:"grid",columns:4,filters:[{name:"closingMonth",type:"combobox",label:"결산월",options:w},{name:"customerNumber",type:"long-search",label:"고객번호",defaultValue:"CUST1001",readonly:!0,onButtonClick:(n,e)=>{e==null||e.preventDefault(),e==null||e.stopPropagation();const a=n||"",r=(s==null?void 0:s.filters.accountNumber)||"";window.open(`/popup/customer-search?customerNumber=${a}&accountNumber=${r}&openerTabId=${t}`,"CustomerSearch","width=1600,height=800")}},{name:"accountNumber",type:"text",label:"계좌번호"},{name:"businessScale",type:"select",label:"기업규모",options:[]},{name:"accountName",type:"select",label:"과목명",options:[]},{name:"industryClassification",type:"select",label:"업종분류",options:[]},{name:"byRegion",type:"text",label:"지역별"},{name:"managementBranch",type:"search",label:"관리부점",readonly:!0,defaultValue:{code:"B100",name:"강남1지점"},onButtonClick:(n,e)=>{e==null||e.preventDefault(),e==null||e.stopPropagation();const a=(n==null?void 0:n.code)||"",r=(n==null?void 0:n.name)||"";window.open(`/popup/branch-management?branchCode=${a}&branchName=${r}&openerTabId=${t}`,"BranchManagement","width=1600,height=800")}},{name:"detailedProductName",type:"select",label:"세부 상품명",options:[]},{name:"modifierEmployeeId",type:"search",label:"수정자 사번",onButtonClick:(n,e)=>{e==null||e.preventDefault(),e==null||e.stopPropagation();const a=(n==null?void 0:n.code)||"",r=(n==null?void 0:n.name)||"";window.open(`/popup/user-search?usrno=${a}&usrNm=${r}&openerTabId=${t}`,"UserSearch","width=1600,height=800")}},{name:"blank1",type:"blank"},{name:"blank2",type:"blank"}]}],S=c.useCallback((n,e)=>{i(t,{[n]:e})},[t,i]),g=()=>{console.log("Search clicked, fetching inquiry data..."),f("inquiry"),h(t,"soundnessTable",J)},x=()=>{console.log("History clicked, fetching history data..."),f("history"),h(t,"soundnessTable",z)},A=c.useMemo(()=>l==="inquiry"?[{id:"confirm"}]:[],[l]),B=c.useMemo(()=>{if(l==="inquiry"){const n=["progressStatus","history","search","modify"];return({Q0001:[...n,"assignConfirm","auditOpinion","auditConfirm","surcharge","excel"],Q0002:[...n,"assignConfirm","excel"],Q0003:[...n,"auditOpinion","auditConfirm","excel"],Q0004:[...n,"auditOpinion","auditConfirm","excel"],Q0005:[...n,"auditOpinion","surcharge","excel"],Q0006:[...n,"excel"]}[b]||[]).map(r=>r==="search"?{id:r,onClick:g}:r==="history"?{id:r,onClick:x}:r==="progressStatus"?{id:r,onClick:()=>{const m=window.screen.width/2-800,p=window.screen.height/2-900/2;window.open("/popup/asset-soundness-progress","AssetSoundnessProgress",`width=1600,height=900,top=${p},left=${m}`)}}:r==="auditOpinion"?{id:r,onClick:()=>{const m=window.screen.width/2-500,p=window.screen.height/2-800/2,q=(s==null?void 0:s.filters.closingMonth)||"",M=encodeURIComponent(JSON.stringify(w));window.open(`/popup/soundness-audit-opinion?openerTabId=${t}&selectedMonth=${q}&monthOptions=${M}`,"SoundnessAuditOpinion",`width=1000,height=800,top=${p},left=${m}`)}}:{id:r})}return l==="generation"?[{id:"register"}]:[]},[l,b,g,x]);if(!s)return null;const k=y==="inquiry"?X:Y,I=y==="inquiry"?["loanAmount"]:["loanAmount","loanBalance","loanBySubject"];return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:v,alt:"타이틀 아이콘",width:40,height:40}),o.jsx("h2",{className:"text-lg font-semibold",children:"건전성 자료 생성"})]}),o.jsx(D,{children:o.jsxs(R,{children:[o.jsx(u,{children:"홈"}),o.jsx(d,{}),o.jsx(u,{children:"여신사후"}),o.jsx(d,{}),o.jsx(u,{children:"자산건전성/대손상각"}),o.jsx(d,{}),o.jsx(u,{children:o.jsx(L,{children:"건전성 자료 생성"})})]})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(W,{actions:A}),o.jsx(E,{actions:B})]}),o.jsxs(Q,{value:l,onValueChange:T,children:[o.jsxs(U,{children:[o.jsx(C,{value:"inquiry",children:"조회"}),o.jsx(C,{value:"generation",children:"생성"})]}),o.jsx(j,{value:"inquiry",children:o.jsx(V,{filterLayout:$,values:s.filters,onChange:S})}),o.jsx(j,{value:"generation",children:o.jsx("div",{className:"rounded-lg border px-4 py-4",children:o.jsx(G,{label:"파일 선택",buttons:["browse"]})})})]}),o.jsx(_,{title:"조회내용",columns:k,data:((N=s.tables)==null?void 0:N.soundnessTable)||[],amountColumns:I,onRowDoubleClick:n=>{window.open("/popup/bond-legal-progress?residentRegistrationNumber=800101-1234567","BondLegalProgress","width=1600,height=800")}})]})}export{ge as default};
//# sourceMappingURL=page-YMSrsRMb.js.map
